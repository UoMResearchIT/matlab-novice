<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Programming with MATLAB: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="../assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="../assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Programming with MATLAB
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Programming with MATLAB
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Learning resources</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with MATLAB
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Working With Variables</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-arrays.html">2. Arrays</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-loading_data.html">3. Loading data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-plotting.html">4. Plotting data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-scripts.html">5. Writing MATLAB Scripts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-cond.html">6. Making Choices</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-func.html">7. Creating Functions</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-loops.html">8. Repeating With Loops</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Learning resources</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Working With Variables</a></p>
<hr>
<p>Last updated on 2023-12-04 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 50 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I store values and do simple calculations with them?</li>
<li>Which type of operations can I do?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Navigate among important sections of the MATLAB environment.</li>
<li>Assign values to variables.</li>
<li>Identify what type of data is stored in a variable.</li>
<li>Creating simple arrays.</li>
<li>Be able to explore the values of saved variables.</li>
<li>Learn how to delete variables and keep things tidy.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction-to-the-matlab-gui">Introduction to the MATLAB GUI<a class="anchor" aria-label="anchor" href="#introduction-to-the-matlab-gui"></a>
</h2>
<hr class="half-width">
<p>Before we can start programming, we need to know a little about the
MATLAB interface. Using the default setup, the MATLAB desktop contains
several important sections:</p>
<ul>
<li>In the <strong>Command Window</strong> we can execute commands.
Commands are typed after the prompt <code>&gt;&gt;</code> and are
executed immediately after pressing <kbd>Enter</kbd>.</li>
<li>Alternatively, we can open the <strong>Editor</strong>, write our
code and run it all at once. The advantage of this is that we can save
our code and run it again in the same way at a later stage.</li>
<li>The <strong>Workspace</strong> contains all the variables which we
have loaded into memory.</li>
<li>The <strong>Current Folder</strong> window shows files in the
current directory. We can change the current folder using this
window.</li>
<li>
<strong>Search Documentation</strong> on the top right of your
screen lets you search for functions. Suggestions for functions that
will do what you want to do will pop up. Clicking on them will open the
documentation. Another way to access the documentation is via the
<code>help</code> command — we will return to this later.</li>
</ul></section><section><h2 class="section-heading" id="working-with-variables">Working with variables<a class="anchor" aria-label="anchor" href="#working-with-variables"></a>
</h2>
<hr class="half-width">
<p>In this lesson we will learn how to manipulate the inflammation
dataset with MATLAB. But before we discuss how to deal with many data
points, we will demonstrate how to store a single value on the
computer.</p>
<p>We can create a new <a href="reference.html#variable">variable</a> by
assigning a value to it using <code>=</code></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">=</span> <span class="fl">55</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">x</span> <span class="op">=</span></span>
<span>    <span class="fl">55</span></span></code></pre>
</div>
<p>Notice that MATLAB responded by printing an output confirming that
the variable has the desired value, and also that the variable appeared
in the workspace.</p>
<p>A variable is just a name for a piece of data or <em>value</em>.
Variable names must begin with a letter, and are case sensitive. They
can also contain numbers or underscores. Examples of valid variable
names are <code>weight</code>, <code>size3</code>,
<code>patient_name</code> or <code>alive_on_day_3</code>.</p>
<p>The reason we work with variables is so that we can reuse them, or
save them for later use. We can also do operations with these variables.
For example, we can do a simple sum:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">y</span> <span class="op">=</span> <span class="fl">10</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">y</span> <span class="op">=</span></span>
<span>    <span class="fl">10</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="fl">65</span></span></code></pre>
</div>
<p>Note that the answer was saved in a new variable called
<code>ans</code>. This variable is temporary, and will be overwritten
with any new operation we do. For example, if we now substract y from x
we get:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">-</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="fl">45</span></span></code></pre>
</div>
<p>The result of the sum is now gone forever. We can assign the result
of an operation to a new variable, for example:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">z</span> <span class="op">=</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">z</span> <span class="op">=</span></span>
<span>    <span class="fl">550</span></span></code></pre>
</div>
<p>This created a new variable <code>z</code>. If you look at the
workspace, you can see that the value of z is 550.</p>
<p>We can even use a variable in an operation, and save the value in the
same variable. For example:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">y</span> <span class="op">=</span> <span class="va">y</span><span class="op">/</span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">y</span> <span class="op">=</span></span>
<span>    <span class="fl">2</span></span></code></pre>
</div>
<p>Here you can see that the expression to the right of the
<code>=</code> sign is evaluated <em>first</em>, and the result is then
assigned to the variable specified to the left of the <code>=</code>
sign.</p>
<p>We can use multiple variables in a single operation, for example:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">z</span> <span class="op">=</span> <span class="va">z</span> <span class="op">-</span> <span class="va">y</span><span class="op">^</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span><span class="op">*</span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">z</span> <span class="op">=</span></span>
<span>    <span class="fl">817</span></span></code></pre>
</div>
<p>where we used the caret symbol <code>^</code> to take the third power
of y.</p>
<div class="section level3">
<h3 id="logical-operations">Logical operations<a class="anchor" aria-label="anchor" href="#logical-operations"></a>
</h3>
<p>In programming, there is another type of operation that becomes very
important: comparison. We can compare two numbers (or variables) to see
which one is smaller, for example</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mass</span> <span class="op">=</span> <span class="fl">20</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">age</span> <span class="op">=</span> <span class="fl">2.5</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">frac</span> <span class="op">=</span> <span class="va">mass</span><span class="op">/</span><span class="va">age</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c1</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&lt;</span> <span class="fl">10</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">mass</span> <span class="op">=</span></span>
<span>    <span class="fl">20</span></span>
<span><span class="va">age</span> <span class="op">=</span></span>
<span>    <span class="fl">2.5000</span></span>
<span><span class="va">frac</span> <span class="op">=</span></span>
<span>     <span class="fl">8</span></span>
<span></span>
<span><span class="va">c1</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<p>Something interesting just happened with the variable c1. If I ask
you whether frac (8) is smaller than 10, you would say “yes”. Matlab
answered with a <code>logical 1</code>. If I ask you whether frac is
greater than 10, you would say “no”. Matlab answers with a
<code>logical 0</code>.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c2</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&gt;</span> <span class="fl">10</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c2</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span></code></pre>
</div>
<p>There are only two options (yes or no, true or false, 0 or 1), and so
it is “cheaper” for the computer to save space only for those two
options.</p>
<p>The “type” of this data is not the same as the “type” of data that
represents a number. It comes from a logical comparison, and so MATLAB
identifies it as such.</p>
<p>You can also see that in the workspace these variables have a tick
next to them, instead of the squares we had seen. There are actually
other symbols that appear there, relating to the different types of
information we can save in variables (unfold the info below if you want
to know more).</p>
<div id="data-types" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="data-types" class="callout-inner">
<h3 class="callout-title">Data types</h3>
<div class="callout-content">
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>We mentioned above that we can get other symbols in the workspace
which relate to the types of information we can save.</p>
<p>We know we can save numbers, and logical values, but we can also save
letters or strings, for example. Numbers are by default saved as type <a href="https://uk.mathworks.com/help/matlab/ref/double.html" class="external-link"><em>double</em></a>,
which means they can store very big or very small numbers. Letters are
type <a href="https://uk.mathworks.com/help/matlab/ref/char.html" class="external-link">‘<em>char</em>’</a>,
and words or sentences are <a href="https://uk.mathworks.com/help/matlab/ref/string.html" class="external-link">“<em>strings</em>”</a>.
Logical values (or booleans) are values that mean <a href="https://uk.mathworks.com/help/matlab/ref/true.html" class="external-link">true</a> or <a href="https://uk.mathworks.com/help/matlab/ref/false.html" class="external-link">false</a>,
and are represented with zero or one. They are usually the result of
comparing things.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight</span> <span class="op">=</span> <span class="fl">64.5</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size3</span> <span class="op">=</span> <span class="ss">'L'</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_name</span> <span class="op">=</span> <span class="st">"Jane Doe"</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">alive_on_day_3</span> <span class="op">=</span> <span class="va">true</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">weight</span> <span class="op">=</span></span>
<span>   <span class="fl">64.5000</span></span>
<span><span class="va">size3</span> <span class="op">=</span></span>
<span>    <span class="st">'L'</span></span>
<span><span class="va">patient_name</span> <span class="op">=</span></span>
<span>    <span class="st">"Jane Doe"</span></span>
<span><span class="va">alive_on_day_3</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<p>Notice the single tick for character variables, in contrast with the
double quote for strings.</p>
<p>If you look at the workspace, you’ll notice that the icon next to
each variable is different, and if you hover over it, it will tell you
the type of variable it is.</p>
<p>You can also check the “class” of the variable with the
<code>class</code> function:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">class</span>(<span class="va">patient_name</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="st">'string'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>We can also check if two variables (or even operations) are the
same</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c3</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">==</span> <span class="va">mass</span><span class="op">/</span><span class="va">age</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c3</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<p>We can also combine comparisons. For example, we can check whether
frac is smaller than 10 <strong><em>and</em></strong> the age is greater
than 5</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c4</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&lt;</span> <span class="fl">10</span> <span class="op">&amp;&amp;</span> <span class="va">age</span> <span class="op">&gt;</span> <span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c4</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span></code></pre>
</div>
<p>In this case, both conditions need to be met for the result to be
“yes” (1).</p>
<p>If we want a “yes” as long as at least one of the conditions are met,
we would ask if frac is smaller than 10 <strong><em>or</em></strong> the
age is greater than 5</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">c5</span> <span class="op">=</span> <span class="va">frac</span> <span class="op">&lt;</span> <span class="fl">10</span> <span class="op">||</span> <span class="va">age</span> <span class="op">&gt;</span> <span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">c5</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
</div>
<div id="negating-conditions-and-including-the-limits" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="negating-conditions-and-including-the-limits" class="callout-inner">
<h3 class="callout-title">Negating conditions and including the limits</h3>
<div class="callout-content">
<p>We often asks questions or characterise things in negative. “We did
not start late today.”, “I was not going faster than the speed limit
officer!”, and “I didn’t shoot no deputy” are just some examples.</p>
<p>Naturally, we may want to do so in programming too. In MATLAB the
negative is represented with <code>~</code>. For example, we can check
if the speed is indeed not faster than the limit with
<code>~(speed &gt; 70)</code>, which MATLAB reads as “not speed greater
than 70”.</p>
<p>Can you express these questions in MATLAB code?</p>
<ul>
<li>Is 1 + 2 + 3 + 4 not smaller than 10?</li>
<li>Is 5 to the power of 3 different from 125?</li>
<li>Is x + y greater or equal to x/y?</li>
<li>Is x + y not greater or equal to x/y?</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>We can ask the first two question in positive, encapsulate it in
brackets, and then negate it:</p>
<ul>
<li><code>~(1 + 2 + 3 + 4 &lt; 10)</code></li>
<li><code>~(5^3 == 125)</code></li>
</ul>
<p>Asking if two things are different is so common, that MATLAB has a
special symbol for it. So the second question, we could have asked
instead with</p>
<ul>
<li><code>5^3 ~= 125</code></li>
</ul>
<p>We can ask if x+y is greater or equal to x/y with:</p>
<ul>
<li><code>x+y &gt; x/y || x+y == x/y</code></li>
</ul>
<p>There is actually again a shortcut for this, MATLAB understands
<code>&gt;=</code> as “greater or equal to”, and of cours for smaller or
equal too it understands <code>&lt;=</code>. So the same condition could
be written as:</p>
<ul>
<li><code>x+y &gt;= x/y</code></li>
</ul>
<p>Asking if x + y is not greater or equal to x/y is the same question
as above, but negated. Remembering to add the brackets, we get:</p>
<ul>
<li><code>~(x+y &gt; x/y || x+y == x/y)</code></li>
<li>or <code>~(x+y &gt;= x/y)</code>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="arrays">Arrays<a class="anchor" aria-label="anchor" href="#arrays"></a>
</h3>
<p>You may notice that all of the variable types start with a
<code>1x1</code>. This is because MATLAB thinks in terms of
<em>groups</em> of variables called arrays, or matrices.</p>
<p>We can create an array using square brackets and separating each
value with a comma:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>A =
     1     2     3</code></pre>
</div>
<p>If you now hover over the data type icon, you’ll find that it shows
<code>1x3</code>. This means that the array A has 1
<strong><em>row</em></strong> and 3
<strong><em>columns</em></strong>.</p>
<p>We can create matrices using semi-colons to separate rows:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">B</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">;</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">4</span><span class="op">;</span> <span class="fl">5</span><span class="op">,</span> <span class="fl">6</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>B =
     1     2
     3     4
     5     6</code></pre>
</div>
<p>You’ll notice that B has three rows and two columns, which explains
the <code>3x2</code> we get from the workspace.</p>
<p>We can also create arrays of other types of data. For example, we
could create an array of names:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Names</span> <span class="op">=</span> [<span class="st">"John"</span><span class="op">,</span> <span class="st">"Abigail"</span><span class="op">,</span> <span class="st">"Bertrand"</span><span class="op">,</span> <span class="st">"Lucile"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Names =
  1×4 string array
    "John"    "Abigail"    "Bertrand"    "Lucile"</code></pre>
</div>
<p>We can use logical values too:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">C</span> <span class="op">=</span> [<span class="va">true</span><span class="op">;</span> <span class="va">false</span><span class="op">;</span> <span class="va">false</span><span class="op">;</span> <span class="va">true</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>C =
  4×1 logical array
   1
   0
   0
   1</code></pre>
</div>
<p>Something to bear in mind, however, is that all values in an array
<strong>must be of the same type</strong>.</p>
<p>We mentioned before that MATLAB is actually more used to working with
arrays than individual variables. Well, if it is so used to working with
arrays, can we do operations with them?</p>
<p>The answer is yes! In fact, this is what makes MATLAB a particularly
interesting programming language.</p>
<p>We can, for example, check the whole matrix B and look for values
greater than, say, 3.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">B</span> <span class="op">&gt;</span> <span class="fl">3</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
  3×2 logical array
   0   0
   0   1
   1   1</code></pre>
</div>
<p>MATLAB then compared each element of B and asked “is this element
greater than 3?”. The result is another array, of the same size and
dimensions as B, with the answers.</p>
<p>We can also do sums, multiplications, and pretty much anything we
want with an array, but we need to be careful with what we do.</p>
<p>Despite this being so interesting and increadibly powerful, this
course will focus more on basic programming concepts, and so we won’t
use this feature very much. However, it is very important that you keep
it in mind, and that you do ask questions about it during the break if
you are interested.</p>
<div id="suppressing-the-output" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="suppressing-the-output" class="callout-inner">
<h3 class="callout-title">Suppressing the output</h3>
<div class="callout-content">
<p>In general, the output can be a bit redundant (or even annoying!),
and it can make the code slower, so it is considered good form to
suppress it. To suppress it, we add a semi-colon at the end of the
line:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">=</span> <span class="fl">33</span><span class="op">;</span></span></code></pre>
</div>
<p>At first glance nothing appears to have happened, but the workspace
shows the new value was assigned.</p>
</div>
</div>
</div>
<div id="printing-a-variables-value" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="printing-a-variables-value" class="callout-inner">
<h3 class="callout-title">Printing a variable’s value</h3>
<div class="callout-content">
<p>If we really want to print the variable, then we can simply type its
name and hit <kbd>Enter</kbd>,</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_name</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span></span>
<span><span class="va">patient_name</span> <span class="op">=</span></span>
<span></span>
<span>    <span class="st">"Jane Doe"</span></span></code></pre>
</div>
<p>or using the <code>disp</code>
<strong><em>function</em></strong>.</p>
<p>Functions are pre-defined algorithms (chunks of code), that can be
used multiple times. They usually take some “inputs” inside brackets,
and either have an effect on something or output something.</p>
<p>The <a href="https://uk.mathworks.com/help/matlab/ref/disp.html" class="external-link">disp</a>
function, in particular, takes just one input – the variable that you
want to print – and what it does is to print the variable in a nice way.
For the variable patient_name, we would use it like this:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">patient_name</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Jane Doe</code></pre>
</div>
<p>Note how the output is a bit different from what we got when we just
typed the variable name. There is less indentation and less empty
lines.</p>
</div>
</div>
</div>
<div id="keeping-things-tidy" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keeping-things-tidy" class="callout-inner">
<h3 class="callout-title">Keeping things tidy</h3>
<div class="callout-content">
<p>We have declared a few variables now, and we might not be using all
of them. If we want to delete a variable we can do so by typing
<code>clear</code> and the name of the variable, e.g.:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span> <span class="va">alive_on_day_3</span></span></code></pre>
</div>
<p>You might be able to see it disappear from the workspace. If you now
try to use alive_on_day_3, MATLAB will give an error.</p>
<p>We can also delete <strong>all</strong> of our variables with the
command <code>clear</code>, without any variable names following it. Be
careful though, there’s no way back!</p>
<p>Another thing you might want to clear every once in a while is the
output pane. To do that, we use the command <code>clc</code>.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clc</span></span></code></pre>
</div>
<p>Again, be careful usig this command, there is no way back!</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Variables store data for future use. Their names must start with a
letter, and can have underscores and numbers.</li>
<li>We can add, substract, multiply, divide and potentiate numbers.</li>
<li>We can also compare variables with <code>&lt;</code>,
<code>&gt;</code>, <code>==</code>, <code>&gt;=</code>,
<code>&lt;=</code>, <code>~=</code>, and use <code>~</code> to negate
the result.</li>
<li>Combine logical operations with <code>&amp;&amp;</code> (and) and
<code>||</code> (or).</li>
<li>MATLAB stores data in arrays. The data in an array has to be of the
same type.</li>
<li>You can supress output with <code>;</code>, and print a variable
with <code>disp</code>.</li>
<li>Use <code>clear</code> to delete variables, and <code>clc</code> to
clear the console.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-02-arrays"><p>Content from <a href="02-arrays.html">Arrays</a></p>
<hr>
<p>Last updated on 2024-03-22 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/02-arrays.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 40 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I access the information in an array?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to create multidimensional arrays</li>
<li>Select individual values and subsections of an array.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="initializing-an-array">Initializing an Array<a class="anchor" aria-label="anchor" href="#initializing-an-array"></a>
</h2>
<hr class="half-width">
<p>We just talked about how MATLAB <em>thinks</em> in arrays, and
declared some very simple arrays using square brackets. In some cases,
we will want to create space to save data, but not save anything just
yet. One way of doing so is with <code>zeros</code>. The function <a href="https://uk.mathworks.com/help/matlab/ref/zeros.html" class="external-link">zeros</a>
takes the dimensions of our array as arguments, and populates it with
zeros. For example,</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">3</span><span class="op">,</span><span class="fl">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Z =
     0     0     0     0     0
     0     0     0     0     0
     0     0     0     0     0</code></pre>
</div>
<p>creates a matrix of 3 rows and 5 columns, filled with zeros. If we
had only passed one dimension, MATLAB assumes you want a square matrix,
so</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Z =
     0     0     0
     0     0     0
     0     0     0</code></pre>
</div>
<p>yields a 3×3 array. If we want a single row and 5 columns, we need to
remember that MATLAB reads <code>rows</code>×<code>columns</code>,
so</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">1</span><span class="op">,</span><span class="fl">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Z =
     0     0     0     0     0</code></pre>
</div>
<p>This way <code>zeros</code> function works is shared with many other
functions that create arrays.</p>
<p>For example, the <a href="https://uk.mathworks.com/help/matlab/ref/ones.html" class="external-link"><code>ones</code>
function</a> is nearly identical, but the arrays are filled with ones,
and the <a href="https://uk.mathworks.com/help/matlab/ref/rand.html" class="external-link"><code>rand</code>
function</a> assigns uniformly distributed random numbers between zero
and 1 to each space in the array.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">R</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">8</span>)<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">O</span> <span class="op">=</span> <span class="va">ones</span>(<span class="fl">10</span><span class="op">,</span><span class="fl">10</span>)<span class="op">;</span></span></code></pre>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> This is when supressing the output becomes
more important. You can more comfortably explore the variables
<code>R</code> and <code>O</code> by double clicking them in the
workspace.</p>
</div>
</div>
</div>
<p>The <code>ones</code> function can actually help us initialize a
matrix to any value, because we can multiply a matrix by a constant and
it will multiply each element. So for example,</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">Fives</span> <span class="op">=</span> <span class="va">ones</span>(<span class="fl">3</span><span class="op">,</span><span class="fl">6</span>)<span class="op">*</span><span class="fl">5</span><span class="op">;</span></span></code></pre>
</div>
<p>Produces a 3×6 matrix full of fives.</p>
<p>The <a href="https://uk.mathworks.com/help/matlab/ref/magic.html" class="external-link"><code>magic</code>
function</a> works in a similar way, but you can only declare square
matrices with it. The magic thing about them is that the sum of the
elements on each row or column is the same number.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span> <span class="op">=</span> <span class="va">magic</span>(<span class="fl">4</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>M =
    16     2     3    13
     5    11    10     8
     9     7     6    12
     4    14    15     1</code></pre>
</div>
<p>In this case, each row or column adds up to 34. But how could I tell
in a bigger matrix? How can I select some of the elements of the array
and sum them, for example?</p>
</section><section><h2 class="section-heading" id="array-indexing">Array indexing<a class="anchor" aria-label="anchor" href="#array-indexing"></a>
</h2>
<hr class="half-width">
<p>Array <strong>indexing</strong>, is the method by which we can select
one or more different elements of an array. A solid understanding of
array indexing will be essential to working with arrays. Lets start with
selecting one element.</p>
<p>First, we will create an 8×8 “magic” matrix:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span> <span class="op">=</span> <span class="va">magic</span>(<span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   64    2    3   61   60    6    7   57
    9   55   54   12   13   51   50   16
   17   47   46   20   21   43   42   24
   40   26   27   37   36   30   31   33
   32   34   35   29   28   38   39   25
   41   23   22   44   45   19   18   48
   49   15   14   52   53   11   10   56
    8   58   59    5    4   62   63    1</code></pre>
</div>
<p>We want to access a single value from the matrix:</p>
<figure><img src="../fig/matrix-single-element.svg" alt="Accessing a single value" class="figure mx-auto d-block"></figure><p>To do that, we must provide its <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#index">index</a> in
parentheses. In a 2D array, this means the row and column of the element
separated by a comma, that is, as <code>(row, column)</code>. This index
goes after the name of our array. In our case, this is:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">6</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">38</span></span></code></pre>
</div>
<p>So the index <code>(5, 6)</code> selects the element on the fifth row
and sixth column of <code>M</code>.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> Matlab starts counting indices at 1, not 0!
Many other programming languages start counting indices at 0, so be
careful!.</p>
</div>
</div>
</div>
<p>An index like the one we used selects a single element of an array,
but we can also select a group of elements if instead of a number we
give arrays of indices. For example, if we want to select this
submatrix:</p>
<figure><img src="../fig/matrix-submatrix.svg" alt="Accessing a submatrix" class="figure mx-auto d-block"></figure><p>we want rows 4, 5 and 6, and columns 5, 6 and 7, that is, the arrays
<code>[4,5,6]</code> for rows, and <code>[5,6,7]</code> for columns:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>([<span class="fl">4</span><span class="op">,</span><span class="fl">5</span><span class="op">,</span><span class="fl">6</span>]<span class="op">,</span>[<span class="fl">5</span><span class="op">,</span><span class="fl">6</span><span class="op">,</span><span class="fl">7</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   36   30   31
   28   38   39
   45   19   18</code></pre>
</div>
<div id="the-operator" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-operator" class="callout-inner">
<h3 class="callout-title">The <code>:</code> operator</h3>
<div class="callout-content">
<p>In matlab, the symbol <code>:</code> (<a href="https://uk.mathworks.com/help/matlab/ref/colon.html" class="external-link"><code>colon</code></a>)
is used to specify a range. The range is specified as
<code>start:end</code>. For example, if we type <code>1:6</code> it
generates an array of consecutive numbers from 1 to 6:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   1     2     3     4     5     6</code></pre>
</div>
<p>We can also specify an <em>increment</em> other than one. To specify
the increment, we write the range as <code>start:increment:end</code>.
For example, if we type <code>1:3:15</code> it generates an array
starting with 1, then 1+3, then 1+2*3, and so on, until it reaches 15
(or as close as it can get to 15 without going past it):</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">15</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   1     4     7    10    13</code></pre>
</div>
<p>The array stopped at 13 because 13+3=16, which is over 15.</p>
</div>
</div>
</div>
<p>The rows and columns we just selected could have been specified as
ranges. So if we want the rows from 4 to 6 and columns from 5 to 7, we
can specify the ranges as <code>4:6</code> and <code>5:7</code>. On top
of being a much quicker and neater way to get the rows and columns,
MATLAB knows that the range will produce an array, so we do not even
need the square brackets anymore. So the command above becomes:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">,</span> <span class="fl">5</span><span class="op">:</span><span class="fl">7</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   36   30   31
   28   38   39
   45   19   18</code></pre>
</div>
<div id="checkerboard" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="checkerboard" class="callout-inner">
<h3 class="callout-title">Checkerboard</h3>
<div class="callout-content">
<p>Select the elements highlighted on the image:</p>
<figure><img src="../fig/matrix-strided-rowncols.svg" alt="Accessing strided rows and columns" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>We need to select every other element in both dimensions. To do that,
we define the apropriate intervals with an increment of 2:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">,</span> <span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    2   61    6   57
   26   37   30   33
   15   52   11   56</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="selecting-whole-rows-or-columns">Selecting whole rows or columns<a class="anchor" aria-label="anchor" href="#selecting-whole-rows-or-columns"></a>
</h3>
<p>If we want a whole row, for example:</p>
<figure><img src="../fig/matrix-row.svg" alt="Accessing a row" class="figure mx-auto d-block"></figure><p>we could in principle pick the 5th row and for the columns use the
range <code>1:8</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   32   34   35   29   28   38   39   25</code></pre>
</div>
<p>However, we need to know that there are 8 columns, which is not very
robust.</p>
<div id="the-key-word-end" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-key-word-end" class="callout-inner">
<h3 class="callout-title">The key-word <code>end</code>
</h3>
<div class="callout-content">
<p>When indexing the elements of an array, the key word <code>end</code>
can be used to get the last index available.</p>
<p>For example, <code>M(2, end)</code> returns the last element of the
second row:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">2</span><span class="op">,</span> <span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>   <span class="fl">16</span></span></code></pre>
</div>
<p>We can also use it in combination with the <code>:</code> operator.
For example, <code>M(5:end, 3)</code> returns the elements of column 3
from row 5 until the end:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">:</span><span class="kw">end</span><span class="op">,</span><span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>   <span class="fl">35</span></span>
<span>   <span class="fl">22</span></span>
<span>   <span class="fl">14</span></span>
<span>   <span class="fl">59</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>We can then use the keyword <code>end</code> instead of the 8 to get
the whole row with <code>1:end</code>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   32   34   35   29   28   38   39   25</code></pre>
</div>
<p>This is much better, now this works for any size of matrix, and we
don’t need to know the size.</p>
<div id="using-as-an-index" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="using-as-an-index" class="callout-inner">
<h3 class="callout-title">Using <code>:</code> as an index</h3>
<div class="callout-content">
<p>Getting a whole row or column is such a common operation, that MATLAB
has a shortcut: Using <code>:</code> alone is equivalent to
<code>1:end</code>!</p>
<p>For example, We can then get the whole fifth row with:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>   <span class="fl">16</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>As you can see, the <code>:</code> operator is quite important when
accessing arrays!</p>
<p>We can use it to select multiple rows,</p>
<figure><img src="../fig/matrix-multi-rows.svg" alt="Accessing multiple rows" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   64    2    3   61   60    6    7   57
    9   55   54   12   13   51   50   16
   17   47   46   20   21   43   42   24
   40   26   27   37   36   30   31   33</code></pre>
</div>
<p>or multiple columns:</p>
<figure><img src="../fig/matrix-multi-cols.svg" alt="Accessing multiple columns" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="op">:,</span> <span class="fl">6</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    6    7   57
   51   50   16
   43   42   24
   30   31   33
   38   39   25
   19   18   48
   11   10   56
   62   63    1</code></pre>
</div>
<p>or even the whole matrix. Try for example:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">N</span> <span class="op">=</span> <span class="va">M</span>(<span class="op">:</span>)</span></code></pre>
</div>
<p>and you’ll see that it returns all the elements of M. The result,
however, is a column vector, not a matrix. We can make sure that the
result of <code>M(:)</code> has 8x8=64 elements by using the function <a href="https://uk.mathworks.com/help/matlab/ref/size.html" class="external-link">size</a>,
which returns the dimensions of the array given as an input:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size</span>(<span class="va">N</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
   64    1</code></pre>
</div>
<p>So it has 64 rows and 1 column. Effectively, then, <code>M(:)</code>
‘flattens’ the array into a column vector. The order of the elements in
the resulting vector comes from appending each column of the original
array in turn. This is the result of something called <a href="https://uk.mathworks.com/company/technical-articles/matrix-indexing-in-matlab.html" class="external-link">linear
indexing</a>, which is a way of accessing elements of an array by a
single index.</p>
<div id="master-indexing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="master-indexing" class="callout-inner">
<h3 class="callout-title">Master indexing</h3>
<div class="callout-content">
<p>Select the elements highlighted on the image without using the
numbers 5 or 8, and using <code>end</code> only once:</p>
<figure><img src="../fig/matrix-strided-rows.svg" alt="Accessing strided columns" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>We need to tart with row <code>2</code>, and subsequently select
every third row:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="kw">end</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    9   55   54   12   13   51   50   16
   32   34   35   29   28   38   39   25
    8   58   59    5    4   62   63    1</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="slicing-character-arrays">Slicing character arrays<a class="anchor" aria-label="anchor" href="#slicing-character-arrays"></a>
</h2>
<hr class="half-width">
<p>A subsection of an array is called a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#slice">slice</a>. We
can take slices of character arrays as well:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">element</span> <span class="op">=</span> <span class="ss">'oxygen'</span><span class="op">;</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="st">"first three characters: "</span> <span class="op">+</span> <span class="va">element</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>))</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="st">"last three characters: "</span> <span class="op">+</span> <span class="va">element</span>(<span class="fl">4</span><span class="op">:</span><span class="fl">6</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>first three characters: oxy
last three characters: gen</code></pre>
</div>
<p>And we can use all the tricks we have learned to select the data we
want. For example, to select every other character we can use the colon
operator with an increment of 2:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">element</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="st">'oye'</span></span></code></pre>
</div>
<p>We can also use the colon operator to access all the elements of the
array, but you’ll notice that the only difference between evaluating
<code>element</code> and <code>element(:)</code> is that the former is a
row vector, and the latter a column vector.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Some functions to initialize matrices include <code>zeros</code>,
<code>ones</code>, and <code>rand</code>. They all produce a square
matrix if only one argument is given, but you can specify the dimensions
you want separated by a comma, as in
<code>zeros(rows,columns)</code>.</li>
<li>To select data points we use round brackets and provide the row and
column indices of the elements we want. They can be just numbers or
arrays of numbers, e.g. <code>M(5,[3,4,5])</code>.</li>
<li>Use the colon operator <code>:</code> to generate ordered arrays as
<code>start:end</code> or <code>start:increment:end</code>.</li>
<li>Use the keyword <code>end</code> to obtain the index of the final
element.</li>
<li>The colon operator by itself <code>:</code> selects all the
elements.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-loading_data"><p>Content from <a href="03-loading_data.html">Loading data</a></p>
<hr>
<p>Last updated on 2023-12-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/03-loading_data.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 40 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I load data to an array?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Read data from a csv to be able to work with it in matlab.</li>
<li>Familiarize ourselves with our sample data.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="loading-data-to-an-array">Loading data to an array<a class="anchor" aria-label="anchor" href="#loading-data-to-an-array"></a>
</h2>
<hr class="half-width">
<p>Reading data from files and writing data to them are essential tasks
in scientific computing, and something that we’d rather not spend a lot
of time thinking about. Fortunately, MATLAB comes with a number of
high-level tools to do these things efficiently, sparing us the grisly
detail.</p>
<p>Before we get started, however, let’s make sure we have the
directories to help organise this project.</p>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout-inner">
<h3 class="callout-title">Tip: Good Enough Practices for Scientific Computing</h3>
<div class="callout-content">
<p><a href="https://swcarpentry.github.io/good-enough-practices-in-scientific-computing/" class="external-link">Good
Enough Practices for Scientific Computing</a> is a paper written by
researchers involved with the Carpentries, which covers basic workflow
skills for research computing. It recommends the following for project
organization:</p>
<ol style="list-style-type: decimal">
<li>Put each project in its own directory, which is named after the
project.</li>
<li>Put text documents associated with the project in the
<code>doc</code> directory.</li>
<li>Put raw data and metadata in the <code>data</code> directory, and
files generated during clean-up and analysis in a <code>results</code>
directory.</li>
<li>Put source code for the project in the <code>src</code> directory,
and programs brought in from elsewhere or compiled locally in the
<code>bin</code> directory.</li>
<li>Name all files to reflect their content or function.</li>
</ol>
</div>
</div>
</div>
<p>We already have a <code>data</code>, <code>results</code> and
<code>src</code> directories in our
<code>matlab-novice-inflammation</code> project directory, so we are
ready to continue.</p>
<p>A final step is to set the <em>current folder</em> in MATLAB to our
project folder. Use the <strong>Current Folder</strong> window in the
MATLAB GUI to browse to your project folder (the one now containing the
‘data’, ‘results’ and ‘src’ directories).</p>
<p>To verify the current directory in MATLAB we can run <code>pwd</code>
(print working directory).</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">pwd</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">...</span><span class="op">/</span><span class="va">Desktop</span><span class="op">/</span><span class="va">matlab</span><span class="op">-</span><span class="va">novice</span><span class="op">-</span><span class="va">inflammation</span></span></code></pre>
</div>
<p>A second check we can do is to run the <code>ls</code> (list) command
in the Command Window to list the contents of the working directory — we
should get the following output:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ls</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data  results  src</code></pre>
</div>
<p>We are now set to load our data. As a reminder, our data is
structured like this:</p>
<figure><img src="../fig/loading-data_inflammation-data.png" alt="Information saved in each data file." class="figure mx-auto d-block"></figure><p>But it is stored without the headers, as comma-separated values. Each
line in the file corresponds to a row, and the value for each column is
separated from its neighbours by a comma. The first few rows of our
first file, <code>data/base/inflammation-01.csv</code>, look like
this:</p>
<pre><code>0,0.065,0.169,0.271,0.332,0.359,0.354,0.333,0.304,0.268,0.234,0.204,0.179,0.141,0.133,0.115,0.083,0.076,0.065,0.065,0.047,0.04,0.041,0.028,0.02,0.028,0.012,0.02,0.011,0.015,0.009,0.01,0.01,0.007,0.007,0.001,0.008,-0,0.006,0.004
0,0.034,0.114,0.2,0.272,0.321,0.328,0.32,0.314,0.287,0.246,0.215,0.207,0.171,0.146,0.131,0.107,0.1,0.088,0.065,0.061,0.052,0.04,0.042,0.04,0.03,0.031,0.031,0.016,0.019,0.02,0.017,0.019,0.006,0.009,0.01,0.01,0.005,0.001,0.011
0,0.081,0.216,0.277,0.273,0.356,0.38,0.349,0.315,0.23,0.235,0.198,0.106,0.198,0.084,0.171,0.126,0.14,0.086,0.01,0.06,0.081,0.022,0.035,0.01,0.086,-0,0.102,0.032,0.07,0.017,0.136,0.022,-0,0.031,0.054,-0,-0,0.05,0.001</code></pre>
<p>There is a very tempting button that says “Import Data” in the
toolbar. If you click on it, you can find the file, and it will take you
through a GUI wizard to upload the data. However, this is much more
complicated than what we need, and it is not very helpful for loading
multiple files (as we will in later episodes). Instead, lets try to do
it on the command window.</p>
<p>We can search the documentation to try to learn how to read our
matrix of data. Type <code>read matrix</code> into the documentation
toolbar. MATLAB suggests using <code>readmatrix</code>. If we have a
closer look at the documentation, MATLAB also tells us which inputs and
output this function has.</p>
<p>For the <code>readmatrix</code> function we need to provide a single
argument: the <strong><em>path</em></strong> to the file we want to read
data from. Since our data is in the ‘data’ folder, the path will begin
with “data/”, we’ll also need to specify the subfolder (we will start by
using “base/”), and this will be followed by the name of the file:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/base/inflammation-01.csv'</span>)<span class="op">;</span></span></code></pre>
</div>
<p>This loads the data and assigns it to a variable,
<em>patient_data</em>. This is a good example of when to use a
semi-colon to suppress output — try re-running the command without the
semi-colon to find out why. You should see a wall of numbers printed,
which is the data from the file.</p>
<p>We can see in the workspace that the variable has 60 rows and 40
columns. If you can’t see the workspace, you can check this with
<code>size</code>, as we did before:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size</span>(<span class="va">patient_data</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    60 40</code></pre>
</div>
<p>You might also recognise the icon in the workspace telling you that
the variable is of type double. If you don’t, you can use the
<code>class</code> function to find out what type of data lives inside
an array:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">class</span>(<span class="va">patient_data</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="st">'double'</span></span></code></pre>
</div>
<p>Again, this just means that you can store very small or very large
numbers, called double precision floating-point numbers.</p>
</section><section><h2 class="section-heading" id="initial-exploration">Initial exploration<a class="anchor" aria-label="anchor" href="#initial-exploration"></a>
</h2>
<hr class="half-width">
<p>We know that in our data each row represents a patient and each
column a different day.</p>
<div class="section level4">
<h4 id="one-patient-at-a-time">
<strong>One patient at a time</strong><a class="anchor" aria-label="anchor" href="#one-patient-at-a-time"></a>
</h4>
<p>We know how to access sections of our data, so lets look at a single
patient first. If we want to look at a single patients’ data, then, we
have to get all the columns for a given row, with:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_5</span> <span class="op">=</span> <span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>patient_5 =
  Columns 1 through 14
         0    0.0370    0.1330    0.2280    0.3060    0.3410    0.3410    0.3480    0.3160    0.2750    0.2540    0.2250    0.1870    0.1630
  Columns 15 through 28
    0.1440    0.1190    0.1070    0.0880    0.0720    0.0600    0.0510    0.0510    0.0390    0.0330    0.0240    0.0280    0.0170    0.0200
  Columns 29 through 40
    0.0160    0.0200    0.0190    0.0180    0.0070    0.0160    0.0220    0.0180    0.0150    0.0050    0.0100    0.0100</code></pre>
</div>
<p>Looking at these 40 numbers tells us very little, so we might want to
look at the mean instead, for example.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_p5</span><span class="op">=</span><span class="va">mean</span>(<span class="va">patient_5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">mean_p5</span> <span class="op">=</span></span>
<span>    <span class="fl">0.1046</span></span></code></pre>
</div>
<p>We can also compute other statistics, like the maximum, minimum and
standard deviation.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_p5</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_5</span>)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_p5</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_5</span>)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_p5</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">max_p5</span> <span class="op">=</span></span>
<span>    <span class="fl">0.3480</span></span>
<span><span class="va">min_p5</span> <span class="op">=</span></span>
<span>     <span class="fl">0</span></span>
<span><span class="va">std_p5</span> <span class="op">=</span></span>
<span>    <span class="fl">0.1142</span></span></code></pre>
</div>
<div id="all-data-points-at-once" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="all-data-points-at-once" class="callout-inner">
<h3 class="callout-title">All data points at once</h3>
<div class="callout-content">
<p>Can you think of a way to get the mean of the whole data? What about
the <code>max</code>, <code>min</code> and <code>std</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>We already know that the colon operator as an index returns all the
elements, so <code>patient_data(:)</code> will return a vector with all
the data points. To compute the mean, we then use:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">global_mean</span> <span class="op">=</span></span>
<span>    <span class="fl">0.1053</span></span></code></pre>
</div>
<p>This works for <code>max</code>, <code>min</code> and
<code>std</code> too:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">global_std</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">global_max</span> <span class="op">=</span></span>
<span>    <span class="fl">0.4530</span></span>
<span><span class="va">global_min</span> <span class="op">=</span></span>
<span>     <span class="fl">0</span></span>
<span><span class="va">global_std</span> <span class="op">=</span></span>
<span>    <span class="fl">0.1118</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have the global statistics, we can check how patient 5
compares with them:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_p5</span> <span class="op">&gt;</span> <span class="va">global_mean</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_p5</span> <span class="op">==</span> <span class="va">global_max</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_p5</span> <span class="op">==</span> <span class="va">global_min</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_p5</span> <span class="op">&lt;</span> <span class="va">global_std</span></span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span></code></pre>
<p>So we know that patient 5 did not suffer more inflamation than
average, that they are not the patient who got the most inflamed, that
they had the global minimum inflamation at some point (0), and that the
std of their inflamation is not below the average.</p>
<div id="food-for-thought" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="food-for-thought" class="callout-inner">
<h3 class="callout-title">Food for thought</h3>
<div class="callout-content">
<p>How would you find the patient who got the highest inflamation?</p>
<p>Would you be happy to do it if you had 1000 patients?</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="one-day-at-a-time">
<strong>One day at a time</strong><a class="anchor" aria-label="anchor" href="#one-day-at-a-time"></a>
</h4>
<p>We could also have looked not at a single patient, but at a single
day. The approach would be very similar, but instead of selecting all
the columns in a row, we want to select all the rows for a given
column:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_9</span> <span class="op">=</span> <span class="va">patient_data</span>(<span class="op">:,</span><span class="fl">9</span>)<span class="op">;</span></span></code></pre>
</div>
<p>The result is now not a row of 40 elements, but a column with 60
items. However, MATLAB is smart enough to figure out what to do with
enquieries just like the ones we did before.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_d9</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">day_9</span>)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_d9</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">day_9</span>)</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_d9</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">day_9</span>)</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_d9</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">day_9</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">mean_d9</span> <span class="op">=</span></span>
<span>    <span class="fl">0.3116</span></span>
<span><span class="va">max_d9</span> <span class="op">=</span></span>
<span>    <span class="fl">0.3780</span></span>
<span><span class="va">min_d9</span> <span class="op">=</span></span>
<span>    <span class="fl">0.2290</span></span>
<span><span class="va">std_d9</span> <span class="op">=</span></span>
<span>    <span class="fl">0.0186</span></span></code></pre>
</div>
<p>We could now check how day 9 compares to the global values:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean_d9</span> <span class="op">&gt;</span> <span class="va">global_mean</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max_d9</span> <span class="op">==</span> <span class="va">global_max</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">min_d9</span> <span class="op">==</span> <span class="va">global_min</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std_d9</span> <span class="op">&lt;</span> <span class="va">global_std</span></span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">0</span></span>
<span><span class="va">ans</span> <span class="op">=</span></span>
<span>  <span class="va">logical</span></span>
<span>   <span class="fl">1</span></span></code></pre>
<p>So we know that at day 9 there was significant inflamation, but that
it is not the day with the highest inflamation; Also, that every patient
was at least a bit inflamed at that moment, and that the standard
deviation of inflamation this day is below the standard deviation of the
whole dataset (so datapoints are closer to each other).</p>
<div id="food-for-thought-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="food-for-thought-1" class="callout-inner">
<h3 class="callout-title">Food for thought</h3>
<div class="callout-content">
<p>How would you find which days had an inflamation value above the
global mean?</p>
<p>Would you be happy to do it if you had 1000 days worth of data?</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="whole-array-analysis">
<strong>Whole array analysis</strong><a class="anchor" aria-label="anchor" href="#whole-array-analysis"></a>
</h4>
<p>The analysis we’ve done until now would be very tedious to repeat for
each patient or day. Luckily, we’ve learnt that MATLAB is used to
thinking in terms of arrays. Surely it must be possible to get the mean
of each patient or each day in one go. It is definitely tempting to
simply call the mean on the array, so let’s try it:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span><span class="op">=</span><span class="va">mean</span>(<span class="va">patient_data</span>)<span class="op">;</span></span></code></pre>
</div>
<p>We’ve supressed the output, but the workspace (or use of
<code>size</code>) tells us that the result is a 1x40 array. Matlab
assumed that we want column averages, and indeed that is something we
might want.</p>
<p>The other statistics behave in the same way, so we can more
appropriately label our variables as:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_std</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_data</span>)<span class="op">;</span></span></code></pre>
</div>
<p>You’ll notice that each of the above variables is a <code>1×40</code>
array.</p>
<p>Now that we have the information for each day in an array, we can
take advantage of Matlab’s capacity to do array operations. For example,
we can find out which days had an inflamation above the global
average:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_day_mean</span> <span class="op">&gt;</span> <span class="va">global_mean</span></span></code></pre>
</div>
<pre><code>ans =
  1×40 logical array
  Columns 1 through 20
   0   0   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   0   0   0
  Columns 21 through 40
   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0</code></pre>
<p>We could count which day it is, but lets take a shortcut and use the
find function:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">find</span>(<span class="va">ans</span>)</span></code></pre>
</div>
<pre><code>ans =
     3     4     5     6     7     8     9    10    11    12    13    14    15    16    17</code></pre>
<p>So it seems that days 3 to 17 were the critical days.</p>
<p>But what if we want the analysis per patient, instead of per day?</p>
<p>Lets look at the documentation for <code>mean</code>, either through
the documentation browser or using the <code>help</code> command</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">help</span> <span class="va">mean</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>mean   Average or mean value.
    S = mean(X) is the mean value of the elements in X if X is a vector.
    For matrices, S is a row vector containing the mean value of each
    column.
    For N-D arrays, S is the mean value of the elements along the first
    array dimension whose size does not equal 1.

    mean(X,DIM) takes the mean along the dimension DIM of X.

    S = mean(...,TYPE) specifies the type in which the mean is performed,
    and the type of S. Available options are:

    'double'    -  S has class double for any input X
    'native'    -  S has the same class as X
    'default'   -  If X is floating point, that is double or single,
                   S has the same class as X. If X is not floating point,
                   S has class double.

    S = mean(...,NANFLAG) specifies how NaN (Not-A-Number) values are
    treated. The default is 'includenan':

    'includenan' - the mean of a vector containing NaN values is also NaN.
    'omitnan'    - the mean of a vector containing NaN values is the mean
                   of all its non-NaN elements. If all elements are NaN,
                   the result is NaN.

    Example:
        X = [1 2 3; 3 3 6; 4 6 8; 4 7 7]
        mean(X,1)
        mean(X,2)

    Class support for input X:
       float: double, single
       integer: uint8, int8, uint16, int16, uint32,
                int32, uint64, int64

    See also median, std, min, max, var, cov, mode.</code></pre>
</div>
<p>The first paragraph explains why it worked for a single day or
patient. The input we used was a vector, so it took the mean.</p>
<p>The second paragraph explains why we got per-day means when we used
the whole data as input. Our array is 2D, and the first dimention is the
rows, so it averaged the rows.</p>
<p>The third paragraph is the key to what we want to do now. A second
argument <code>DIM</code> can be used to specify the direction in which
to take the mean. If we want patient averages, we want the columns to be
averaged, that is, dimension 2.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span></code></pre>
</div>
<p>As expected, the result is a <code>60×1</code> vector, with the mean
for each patient.</p>
<p>Unfortunately, <code>max</code>, <code>min</code> and
<code>std</code> do not behave quite in the same way. If you explore
their documentation, you’ll see that we need to add another argument, so
that the commands become:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span>[]<span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span>[]<span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">per_patient_std</span> <span class="op">=</span> <span class="va">std</span>(<span class="va">patient_data</span><span class="op">,</span>[]<span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span></code></pre>
</div>
<p>All of the above return a <code>60×1</code> vector.</p>
<div id="most-inflamed-patients" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="most-inflamed-patients" class="callout-inner">
<h3 class="callout-title">Most inflamed patients</h3>
<div class="callout-content">
<p>Can you find the patients that got the highest inflamation?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Using the power MATLAB has to compare arrays, we can check which
patients have a <code>max</code> equal to the <code>global_max</code>.
If we wrap this check in the find function, we get the row numbers:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">find</span>(<span class="va">per_patient_max</span> <span class="op">==</span> <span class="va">global_max</span>)</span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>     <span class="fl">31</span></span></code></pre>
<p>So patient 31 has the maximum inflamation level.</p>
<p><br></p>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Alternative solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>We can only do this because we had already calculated
<code>per_patient_max</code>. However, there is another way of doing
this. Just as we used <code>find</code> to locate the patients that had
a maximum inflammation value equal to the global maximum, we can find
the value from the whole data set:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">find</span>(<span class="va">patient_data</span> <span class="op">==</span> <span class="va">global_max</span>)</span></code></pre>
</div>
<pre><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>     <span class="fl">391</span></span></code></pre>
<p>However, this resulted in a rather odd number. This number represents
the linear index of the global maximum. Linear indices result from
counting through the elements in the first column, then continue the
count on the second column and so on. Luckily, there is a function to
convert this linear index into a row and number column,
<code>ind2sub</code>. We need to provide the size of our array, and the
linear index, i.e. <code>ind2sub([60,40],391)</code>. We also need to
provide space for both outputs (the row and column numbers), so we call
it as <code>[r,c]=ind2sub([60,40],391)</code>. ternatively, we can get
the size and index inside the call:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="va">r</span><span class="op">,</span><span class="va">c</span>]<span class="op">=</span><span class="va">ind2sub</span>(<span class="va">size</span>(<span class="va">patient_data</span>)<span class="op">,</span><span class="va">find</span>(<span class="va">patient_data</span> <span class="op">==</span> <span class="va">global_max</span>))</span></code></pre>
</div>
<pre><code><span><span class="va">r</span> <span class="op">=</span></span>
<span>    <span class="fl">31</span></span>
<span><span class="va">c</span> <span class="op">=</span></span>
<span>     <span class="fl">7</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>We can gain some insight exploring the data like we have so far, but
we all know that an image speaks more than a thousend numbers, so we’ll
learn to make some plots.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>readmatrix</code> to read tabular CSV data into a
program.</li>
<li>Use <code>mean</code>, <code>min</code>, <code>max</code>, and
<code>std</code> on vectors to get the mean, minimum, maximum and
standard deviation.</li>
<li>Use <code>mean(array,DIM)</code> to specify the dimension of your
array in which to compute the mean.</li>
<li>For <code>min</code>, <code>max</code>, and <code>std</code>, the
arguments need to be <code>(array,[],DIM)</code> instead.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-plotting"><p>Content from <a href="04-plotting.html">Plotting data</a></p>
<hr>
<p>Last updated on 2024-03-22 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/04-plotting.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 60 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I visualize my data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Display simple graphs with appropriate titles and labels.</li>
<li>Get familiar with the <code>plot</code> function.</li>
<li>Learn how to plot multiple lines at the same time.</li>
<li>Learn how to show images side by side.</li>
<li>Get familiar with the <code>heatmap</code> and <code>imagesc</code>
functions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h2>
<hr class="half-width">
<p>The mathematician Richard Hamming once said, “The purpose of
computing is insight, not numbers,” and the best way to develop insight
is often to visualise data. Visualisation deserves an entire lecture (or
course) of its own, but we can explore a few features of MATLAB
here.</p>
<p>We will start by exploring the function <code>plot</code>. The most
common usage is to provide two vectors, like <code>plot(X,Y)</code>.
Lets start by plotting the average inflammation across patients over
time. For the <code>Y</code> vector we can provide
<code>per_day_mean</code>, and for the <code>X</code> vector we want to
use the number of the day in the trial, which we can generate as a range
with:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_of_trial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">;</span></span></code></pre>
</div>
<p>Then our plot can be generated with:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_mean</span>)</span></code></pre>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> If we only provide a vector as an argument it
plots a data-point for each value on the y axis, and it uses the index
of each element as the x axis. For our patient data the indices coincide
with the day of the study, so <code>plot(per_day_mean)</code> generates
the same plot. In most cases, however, using the indices on the x axis
is not desireable.</p>
</div>
</div>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note:</strong> We do not even need to have the vector saved
as a variable. We would obtain the same plot with the command
<code>plot(1:40, mean(patient_data, 1))</code>, or
<code>plot(mean(patient_data, 1))</code>.</p>
</div>
</div>
</div>
<p>As it is, the image is not very informative. We need to give the
figure a <code>title</code> and label the axes using <code>xlabel</code>
and <code>ylabel</code>, so that other people can understand what it
shows (including us, if we return to this plot 6 months from now).</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Daily average inflammation"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflammation"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_average-inflammation.svg" alt="Average inflammation" class="figure mx-auto d-block"></figure><p>That’s much better! Now the plot actually communicates something. As
we expected, this figure tells us way more than the numbers we had seen
in the previous section.</p>
<p>Let’s have a look at two other statistics: the maximum and minimum
inflammation per day across all patients.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_max</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Maximum inflammation per day"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflammation"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_max-inflammation.svg" alt="Maximum inflammation" class="figure mx-auto d-block"></figure><div id="scripts" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="scripts" class="callout-inner">
<h3 class="callout-title">Scripts</h3>
<div class="callout-content">
<p>We often have to repeat a series of commands to achieve what we want,
like with these plots. To be able to reuse our commands with more ease,
we use scripts.</p>
<p>A more in depth exploration of scripts will be covered on the next
episode. For now, we’ll just start by clicking
<code>new-&gt;script</code>, using <code>ctrl+N</code>, or typing
<code>edit</code> on the command window.</p>
<p>Any of the above should open a new “Editor” window. Save the file
inside the <code>src</code> folder, as <code>single_plot.m</code>.</p>
<p>Alternatively, if you run</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">edit</span> <span class="va">src</span><span class="op">/</span><span class="va">single_plot</span>.<span class="va">m</span></span></code></pre>
</div>
<p>it creates the file with the correct path and name for you.</p>
<p><strong>Note:</strong> Make sure to add the <code>src</code> folder
to your path, so that MATLAB knows where to find the script. To do that,
right click on the <code>src</code> directory, go to “Add to Path” and
to “Selected Folders”. Alternatively, run:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">addpath</span>(<span class="st">"src"</span>)</span></code></pre>
</div>
<p>Try copying and pasting the plot commands for the max inflammation on
the script and clicking on the “Run” button!</p>
</div>
</div>
</div>
<p>Because we now have a script, it should be much easier to change the
plot to the minimum inflammation:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_of_trial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_min</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Minimum inflammation per day"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflammation"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_min-inflammation.svg" alt="Minumum inflammation" class="figure mx-auto d-block"></figure><p>These two are much more noisy than the mean, as we’d be expect.</p>
</section><section><h2 class="section-heading" id="multiple-lines-in-a-plot">Multiple lines in a plot<a class="anchor" aria-label="anchor" href="#multiple-lines-in-a-plot"></a>
</h2>
<hr class="half-width">
<p>It is often the case that we want to plot more than one line in a
single figure. In MATLAB we can “hold” a figure and keep plotting on the
same axes. For example, we might want to contrast the mean values
accross patients with the inflammation of a single patient.</p>
<p>Lets reuse the code we have in the script, but save it as a new
script called “multiline_plot.m”. You can do that using the dropdown
menu on the save button, or by running this command on the terminal:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">copyfile</span>(<span class="st">"src/single_plot.m"</span><span class="op">,</span><span class="st">"src/multiline_plot.m"</span>)</span></code></pre>
</div>
<p>and then open the new file with
<code>edit src/multiline_plot.m</code>, as before.</p>
<p>If we are displaying more than one line, it is important to add a
legend. We can specify the legend names by adding
<code>,DisplayName="legend name here"</code> inside the plot function.
We then need to activate the legend by running <code>legend</code>. So,
to plot the mean values we first do:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_of_trial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_mean</span><span class="op">,</span> <span class="va">DisplayName</span><span class="op">=</span><span class="st">"Mean"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">legend</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Daily average inflammation"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflammation"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_average_inflammation_with_legend.svg" alt="Average inflamation with legend" class="figure mx-auto d-block"></figure><p>Then, we can use the instruction <code>hold on</code> to add a plot
for patient_5.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">hold</span> <span class="va">on</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">patient_5</span><span class="op">,</span> <span class="va">DisplayName</span><span class="op">=</span><span class="st">"Patient 5"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">hold</span> <span class="va">off</span></span></code></pre>
</div>
<figure><img src="../fig/plotting_average_inflammation_and_patient_5_with_legend.svg" alt="Average inflamation and Patient 5" class="figure mx-auto d-block"></figure><p>So this patient seems fairly average.</p>
<p>Remember to tell MATLAB you are done by adding <code>hold off</code>
when you have finished adding lines to the figure!</p>
<div id="patients-3-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="patients-3-4" class="callout-inner">
<h3 class="callout-title">Patients 3 &amp; 4</h3>
<div class="callout-content">
<p>Try to plot the mean across all patients and the inflammation data
for patients 3 and 4 together.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The first part for the mean remains unchanged:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_of_trial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_mean</span><span class="op">,</span> <span class="va">DisplayName</span><span class="op">=</span><span class="st">"Mean"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">legend</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Daily average inflammation"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflammation"</span>)</span></code></pre>
</div>
<p>Now we need to get the specific data for each patient. We can get the
data for patients 3 and 4 as we did in the previous episode
i.e. <code>patient_data(3,:)</code>. Now we can either save that data in
a variable, or we use it directly in the plot instruction, like
this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">hold</span> <span class="va">on</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">patient_data</span>(<span class="fl">3</span><span class="op">,:</span>)<span class="op">,</span> <span class="va">DisplayName</span><span class="op">=</span><span class="st">"Patient 3"</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">patient_data</span>(<span class="fl">4</span><span class="op">,:</span>)<span class="op">,</span> <span class="va">DisplayName</span><span class="op">=</span><span class="st">"Patient 4"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">hold</span> <span class="va">off</span></span></code></pre>
</div>
<p>The result looks like this:</p>
<figure><img src="../fig/plotting_patients-3-4.svg" alt="Average inflammation and Patients 3 &amp; 4" class="figure mx-auto d-block"></figure><p>Patient 4 seems also quite average, but patient’s 3 measurements are
quite noisy!</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="multiple-plots-in-a-figure">Multiple plots in a figure<a class="anchor" aria-label="anchor" href="#multiple-plots-in-a-figure"></a>
</h2>
<hr class="half-width">
<p><strong>Note:</strong> The <a href="https://mathworks.com/help/matlab/ref/subplot.html" class="external-link"><code>subplot</code></a>
command was deprecated in favour of <code>tiledlayout</code> in
2019.</p>
<p>It is often convenient to show different plots side by side. The <a href="https://mathworks.com/help/matlab/ref/tiledlayout.html" class="external-link"><code>tiledlayout(m,n)</code></a>
command allows us to do just that. The first two parameter define a grid
of <code>m</code> rows and <code>n</code> columns in which our plots
will be placed. To be able to plot something on each of the tiles, we
use the <a href="https://mathworks.com/help/releases/R2019b/matlab/ref/nexttile.html" class="external-link"><code>nexttile</code></a>
command.</p>
<p>Lets start a new script for this topic:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">edit</span> <span class="va">src</span><span class="op">/</span><span class="va">tiled_plot</span>.<span class="va">m</span></span></code></pre>
</div>
<p>We can show the average daily min and max plots together with:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_of_trial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">tiledlayout</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_max</span>)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Max"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflamation"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_min</span>)</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Min"</span>)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Inflamation"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_max-min-tiledplot.svg" alt="Max Min tiledplot" class="figure mx-auto d-block"></figure><p>We can also specify titles and labels for the whole tiled layout if
we assign the tiled layout to a variable and pass it as a first argument
to <code>title</code>, <code>xlabel</code> or <code>ylabel</code>, for
example:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">day_of_trial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">40</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">tlo</span><span class="op">=</span><span class="va">tiledlayout</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Per day data"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Day of trial"</span>)</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Inflamation"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_max</span>)</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Max"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">day_of_trial</span><span class="op">,</span> <span class="va">per_day_min</span>)</span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Min"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_max-min-tiledplot-titles.svg" alt="Max Min tiledplot with shared labels" class="figure mx-auto d-block"></figure><div id="where-is-the-nexttile" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="where-is-the-nexttile" class="callout-inner">
<h3 class="callout-title">Where is the <code>nexttile</code>?</h3>
<div class="callout-content">
<p>You can specify which <em>tile</em> you want to plot next by
specifying the number as an argument to <code>nexttile</code> like
so:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">tiledlayout</span>(<span class="fl">3</span><span class="op">,</span><span class="fl">5</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span>(<span class="fl">3</span>)</span></code></pre>
</div>
<p>Note that, as opposed to numerical arrays, the indexing goes along
the row first, and then jumps to the next column.</p>
</div>
</div>
</div>
<div id="resizing-tiles" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="resizing-tiles" class="callout-inner">
<h3 class="callout-title">Resizing tiles</h3>
<div class="callout-content">
<p>You can also choose a different size for a plot by occupying many
<em>tiles</em> in one go. You do that by specifying the number of rows
and columns you want to use in an array (<code>[rows,columns]</code>),
like this:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span>([<span class="fl">3</span><span class="op">,</span><span class="fl">1</span>])</span></code></pre>
</div>
<p>And you can specify the starting tile at the same time, like
this:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span>(<span class="fl">8</span><span class="op">,</span>[<span class="fl">2</span><span class="op">,</span><span class="fl">3</span>])</span></code></pre>
</div>
<p>Note that using a starting tile that overlaps another plot will erase
that axes. For example, try:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">nexttile</span>(<span class="fl">1</span><span class="op">,</span>[<span class="fl">2</span><span class="op">,</span><span class="fl">2</span>])</span></code></pre>
</div>
</div>
</div>
</div>
<div id="clearing-a-figure" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="clearing-a-figure" class="callout-inner">
<h3 class="callout-title">Clearing a figure</h3>
<div class="callout-content">
<p>If you now try to plot something like the mean, as we had done
before, you will notice that the plot is assigned to the second plot
space in the tiled layout.</p>
<p>To clear the tiled layout, you can use the instruction</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clf</span></span></code></pre>
</div>
<p>which stands for “clear figure”.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="heatmaps">Heatmaps<a class="anchor" aria-label="anchor" href="#heatmaps"></a>
</h2>
<hr class="half-width">
<p>If we wanted to look at all our data at the same time we need three
dimensions: One for the patients, one for the day, and another one for
the inflamation. One option is to use a heatmap, that is, use the colour
of each point to represent the inflamation values.</p>
<p>In MATLAB, at least two methods can do this for us. The <a href="https://uk.mathworks.com/help/matlab/ref/heatmap.html" class="external-link"><code>heatmap</code>
function</a> takes a table as input and produces a heatmap:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">heatmap</span>(<span class="va">patient_data</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Inflammation"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Patient number"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_heatmap.svg" alt="Heat map" class="figure mx-auto d-block"></figure><p>We gain something by visualizing the whole dataset at once; for
example, we can see that some patients (3, 15, 25, 31, 36 and 60) have
very noisy data. However, it is harder to distinguish the details of the
inflammatory response.</p>
<p>Similarly, the <a href="https://uk.mathworks.com/help/matlab/ref/imagesc.html" class="external-link"><code>imagesc</code>
function</a> represents the matrix as a color image.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">imagesc</span>(<span class="va">patient_data</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="st">"Inflammation"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="st">"Day of trial"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="st">"Patient number"</span>)</span></code></pre>
</div>
<figure><img src="../fig/plotting_imagesc-heatmap.svg" alt="imagesc Heat map" class="figure mx-auto d-block"></figure><p>Every value in the matrix is <em>mapped</em> to a color. Blue regions
in this heat map are low values, while yellow shows high values.</p>
<p>Both functions provide very similar information, and can be tweaked
to your liking. The <code>imagesc</code> function is usually only used
for purely numerical arrays, whereas <code>heatmap</code> can process <a href="https://uk.mathworks.com/help/matlab/ref/table.html" class="external-link">tables</a>
(that can have strings or categories in them). In our case, which one
you use is a matter of taste.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>plot(vector)</code> to visualize data in the y axis with
an index number in the x axis.</li>
<li>Use <code>plot(X,Y)</code> to specify values in both axes.</li>
<li>Document your plots with <code>title("My title")</code>,
<code>xlabel("My horizontal label")</code> and
<code>ylabel("My vertical label")</code>.</li>
<li>Use <code>hold on</code> and <code>hold off</code> to plot multiple
lines at the same time.</li>
<li>Use <code>legend</code> and add
<code>,DisplayName="legend name here"</code> inside the plot function to
add a legend.</li>
<li>Use <code>tiledlayout(m,n)</code> to create a grid of <code>m</code>
x <code>n</code> plots, and use <code>nexttile</code> to change the
position of the next plot.</li>
<li>Choose the location and size of the tile by passing arguments to
<code>nextile</code> as <code>nexttile(position,[m,n])</code>.</li>
<li>Use <code>heatmap</code> or <code>imagesc</code> to plot a whole
matrix with values coded as color hues.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-scripts"><p>Content from <a href="05-scripts.html">Writing MATLAB Scripts</a></p>
<hr>
<p>Last updated on 2023-12-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/05-scripts.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 35 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I save and re-use my programs?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write and save MATLAB scripts.</li>
<li>Save MATLAB plots to disk.</li>
<li>Document our scripts for future reference.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the previous episode we started talking about scripts. A MATLAB
script is just a text file with a <code>.m</code> extension, and we
found that they let us save and run several commands in one go.</p>
<p>In this episode we will revisit the scripts in a bit more depth, and
will recap some of the concepts we’ve learned so far.</p>
<p>We’ve written commands to load data from a <code>.csv</code> file,
compute statistics from the data and plot the data in some figures.
Let’s put those commands in a script called
<code>patient_analysis.m</code>, which we’ll save in the
<code>src</code> directory in our current folder,
<code>matlab-novice-inflammation</code>.</p>
<p>To create a new script we can click the “New script” button on the
top left, or use the command:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">edit</span> <span class="va">src</span><span class="op">/</span><span class="va">patient_analysis</span>.<span class="va">m</span></span></code></pre>
</div>
<p>Matlab will create a file called <code>patient_analysis.m</code> in
the <code>src</code> folder. It is important that we let MATLAB know
that we want it to find stuff in this folder. To do this, right click on
the folder icon in the file browser and select “Add to Path”.</p>
<div id="the-matlab-path" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-matlab-path" class="callout-inner">
<h3 class="callout-title">The MATLAB path</h3>
<div class="callout-content">
<p>MATLAB knows about files in the current directory, but if we want to
run a script saved in a different location, we need to make sure that
this file is visible to MATLAB. We do this by adding directories to the
MATLAB <strong>path</strong>. The <em>path</em> is a list of directories
MATLAB will search through to locate files.</p>
<p>To add a directory to the MATLAB path, we go to the <code>Home</code>
tab, click on <code>Set Path</code>, and then on
<code>Add with Subfolders...</code>. We navigate to the directory and
add it to the path to tell MATLAB where to look for our files. When you
refer to a file (either code or data), MATLAB will search all the
directories in the path to find it. Alternatively, for data files, we
can provide the relative or absolute file path.</p>
</div>
</div>
</div>
<p>We can now type the contents of the script:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="st">"data/base/inflammation-01.csv"</span>)<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">% Compute global statistics</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">% Compute patient statistics</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="fl">5</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">% Compare patient vs global</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"Patient 5:"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"High mean?"</span>)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"Highest max?"</span>)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"Lowest min?"</span>)</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span></code></pre>
</div>
<div id="comments" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="comments" class="callout-inner">
<h3 class="callout-title">Comments</h3>
<div class="callout-content">
<p>You might have noticed that we described what we want our code to do
in lines starting with the percent sign: <code>%</code>. This is another
plus of writing scripts: you can comment your code to make it easier to
understand when you come back to it after a while.</p>
</div>
</div>
</div>
<p>Now, before running this script lets clear our workplace so that we
can see what is happening.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clc</span></span></code></pre>
</div>
<p>If you now run the script by clicking “Run” on the graphical user
interface, pressing <code>F5</code> on the keyboard, or typing the
script’s name <code>patient_analysis</code> on the command line (the
file name without the extension), you’ll see a bunch of variables appear
in the workspace and this output:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_analysis</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   0
Highest max?
   0
Lowest min?
   1</code></pre>
</div>
<p>Remember, we supressed most outputs with <code>;</code>, so the only
lines printed are the ones with <code>disp</code>.</p>
<p>As you can see, the script ran every line of code in the script in
order, and created any variable we asked for. Having the code in the
script makes it much easier to follow what we are doing, and also make
changes. For example, if we now want to look at patient 8, all we need
to do is change the number in lines 10, 11 and 12. We can actually do a
bit better, and replace that number with a variable
<code>patient_number</code>.</p>
<p>This variable needs to exist before it is used, so lets insert it
before computing the patient statistics, like so:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="st">"data/base/inflammation-01.csv"</span>)<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">% Compute global statistics</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">% Compute patient statistics</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="va">patient_number</span> <span class="op">=</span> <span class="fl">8</span><span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">% Compare patient vs global</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"Patient:"</span>)</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="va">disp</span>(<span class="va">patient_number</span>)</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"High mean?"</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"Highest max?"</span>)</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="va">disp</span>(<span class="st">"Lowest min?"</span>)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span></code></pre>
</div>
<p>Note that we also changed the disp commands to show the right patient
number.</p>
<p>Getting the results for whichever patient is now as simple as
changing the value of <code>patient_number</code>.</p>
<p>For the case of patient 8, we get:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_analysis</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient:
   8
High mean?
   1
Highest max?
   0
Lowest min?
   1</code></pre>
</div>
<div id="help-text" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="help-text" class="callout-inner">
<h3 class="callout-title">Help text</h3>
<div class="callout-content">
<p>A comment can appear on any line, but be aware that the first line or
block of comments in a script or function is used by MATLAB as the
<strong>help text</strong>. When we use the <code>help</code> command,
MATLAB returns the <em>help text</em>. The first help text line (known
as the <strong>H1 line</strong>) typically includes the name of the
program, and a brief description. The <code>help</code> command works in
just the same way for our own programs as for built-in MATLAB functions.
You should write help text for all of your own scripts and
functions.</p>
</div>
</div>
</div>
<p>Let’s write an H1 line at the top of our script:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">% PATIENT_ANALYSIS   Computes mean, max and min of a patient and compares to global statistics.</span></span></code></pre>
</div>
<p>We can then get help for our script by running</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">help</span> <span class="va">patient_analysis</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  patient_analysis   Computes mean, max and min of a patient and compares to global statistics.</code></pre>
</div>
<section><h2 class="section-heading" id="script-for-plotting">Script for plotting<a class="anchor" aria-label="anchor" href="#script-for-plotting"></a>
</h2>
<hr class="half-width">
<p>You should already have a script from the previous lesson that plots
the mean, max and min using a tiled layout. We will replicate that
script, but add comments to make it easier to understand.</p>
<p>Create a new script in the current directory called
<code>plot_daily_average.m</code></p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">edit</span> <span class="va">src</span><span class="op">/</span><span class="va">plot_daily_average</span>.<span class="va">m</span></span></code></pre>
</div>
<p>In the script, lets recap what we need to do:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">% PLOT_DAILY_AVERAGE   Plots daily average, max and min inflammation accross patients.</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="st">"data/base/inflammation-01.csv"</span>)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="va">fig</span> <span class="op">=</span> <span class="va">figure</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">% Define tiled layout and labels</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="va">tlo</span> <span class="op">=</span> <span class="va">tiledlayout</span>(<span class="fl">1</span><span class="op">,</span><span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="va">xlabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Day of trial"</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="va">ylabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Inflammation"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="va">title</span>(<span class="st">"Average"</span>)</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="co">% Plot max inflammation per day</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="va">title</span>(<span class="st">"Max"</span>)</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="co">% Plot min inflammation per day</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="va">title</span>(<span class="st">"Min"</span>)</span></code></pre>
</div>
<p>Note that we are explicitly creating a new figure window using the
<code>figure</code> command.</p>
<p>Try this on the command line:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">figure</span></span></code></pre>
</div>
<p>MATLAB’s plotting commands only create a new figure window if one
doesn’t already exist: the default behaviour is to reuse the current
figure window as we saw in the previous episode. Explicitly creating a
new figure window in the script avoids any unexpected results from
plotting on top of existing figures.</p>
<p>Now lets run the script:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_daily_average</span></span></code></pre>
</div>
<p>You should see the figure appear.</p>
<p>Try running <code>plot_daily_average</code> again without closing the
first figure to see that it does not plot on top of the previous figure
A second figure is created. If you look carefully, at the top it is
labelled as “Figure 2”.</p>
<p>It is worth mentioning that it is possible to close all the currently
open figures with <code>close all</code>.</p>
<div class="section level3">
<h3 id="saving-figures">Saving figures<a class="anchor" aria-label="anchor" href="#saving-figures"></a>
</h3>
<p>We can ask MATLAB to save the image too using the <code>saveas</code>
command. In order to maintain an organised project we’ll save the images
in the <code>results</code> directory:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co">% Save plot in "results" folder as png image:</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="va">saveas</span>(<span class="va">fig</span><span class="op">,</span><span class="st">"results/daily_average_01.png"</span>)</span></code></pre>
</div>
<div id="getting-the-current-figure" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="getting-the-current-figure" class="callout-inner">
<h3 class="callout-title">Getting the current figure</h3>
<div class="callout-content">
<p>In the script we saved our figure as a variable <code>fig</code>.
This is very useful because we can pass it as a reference, for example,
for the <code>saveas</code> function. If we had not done that, we would
need to pass the “current figure”. You can get the current figure with
<code>gcf</code>, like so:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">% Save plot in "results" folder as png image:</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="st">"results/daily_average_01.png"</span>)</span></code></pre>
</div>
<p>You can also use gcf to test you are on the right figure, for example
with</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="va">gcf</span> <span class="op">==</span> <span class="va">fig</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="hiding-figures">Hiding figures<a class="anchor" aria-label="anchor" href="#hiding-figures"></a>
</h3>
<p>When saving plots to disk, it’s sometimes useful to turn off their
visibility as MATLAB plots them. For example, we might not want to view
(or spend time closing) the figures in MATLAB, and not displaying the
figures could make the script run faster.</p>
<p>Let’s add a couple of lines of code to do this.</p>
<p>We can ask MATLAB to create an empty figure window without displaying
it by setting its <code>Visible</code> property to <code>'off'</code>.
We can do this by passing the option as an argument to the figure
creation: <code>figure(Visible='off')</code></p>
<p>When we do this, we have to be careful to manually “close” the figure
after we are doing plotting on it - the same as we would “close” an
actual figure window if it were open. We can do so with the command
<code>close</code></p>
<p>Adding these two lines, our finished script looks like this:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">% PLOT_DAILY_AVERAGE   Saves plot of daily average, max and min inflammation accross patients.</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="st">"data/base/inflammation-01.csv"</span>)<span class="op">;</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="va">fig</span> <span class="op">=</span> <span class="va">figure</span>(<span class="va">Visible</span><span class="op">=</span><span class="ss">'off'</span>)<span class="op">;</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co">% Define tiled layout and labels</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="va">tlo</span> <span class="op">=</span> <span class="va">tiledlayout</span>(<span class="fl">1</span><span class="op">,</span><span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="va">xlabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Day of trial"</span>)</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="va">ylabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="st">"Inflammation"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="va">title</span>(<span class="st">"Average"</span>)</span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="co">% Plot max inflammation per day</span></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="va">title</span>(<span class="st">"Max"</span>)</span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a><span class="co">% Plot min inflammation per day</span></span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a><span class="va">title</span>(<span class="st">"Min"</span>)</span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a></span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a><span class="co">% Save plot in "results" folder as png image:</span></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a><span class="va">saveas</span>(<span class="va">fig</span><span class="op">,</span><span class="st">"results/daily_average_01.png"</span>)</span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a></span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a><span class="va">close</span>(<span class="va">fig</span>)</span></code></pre>
</div>
<p>The scripts we’ve written make regenerating plots easier, and looking
at individual patient’s data much simpler, but we still need to open the
script, change the patient number, save, and run. In contrast, when we
have used <em>functions</em> we can <em>provide</em> arguments, which
are then used to do something. So, can we create our own
<em>functions</em>?</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Save MATLAB code in files with a <code>.m</code> suffix.</li>
<li>The set of commands in a script get executed by calling the script
by its name, and all variables are saved to the workspace. Be careful,
this potentially <strong>replaces</strong> variables.</li>
<li>Comment your code to make it easier to understand using
<code>%</code> at the start of a line.</li>
<li>The first line of any script or function (known as the H1 line)
should be a comment. It typically includes the name of the program, and
a brief description.</li>
<li>You can use <code>help script_name</code> to get the information in
the H1 line.</li>
<li>Create new figures with <code>figure</code>, or new ‘invisible’
figures with figure(visible=‘off’). Remember to close them with
<code>close()</code>, or <code>close all</code>.</li>
<li>Save figures with
<code>saveas(fig,"results/my_plot_name.png")</code>, where
<code>fig</code> is the figure you want to save, and can be replaced
with <code>gcf</code> if you want to save the current figure.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-06-cond"><p>Content from <a href="06-cond.html">Making Choices</a></p>
<hr>
<p>Last updated on 2023-12-04 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/06-cond.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 40 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can programs make choices depending on variable values?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Introduce conditional statements.</li>
<li>Test for equality within a conditional statement.</li>
<li>Combine conditional tests using <code>AND</code> and
<code>OR</code>.</li>
<li>Construct a conditional statement using <code>if</code>,
<code>elseif</code>, and <code>else</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the last lesson we began experimenting with scripts, allowing us
to re-use code for analysing data and plotting figures over and over
again. To make our scripts even more useful, it would be nice if they
did different things in different situations - either depending on the
data they’re given or on different options that we specify. We want a
way for our scripts to “make choices”.</p>
<p>The tool that MATLAB gives us for doing this is called a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#conditional-statement">conditional
statement</a>. We will use conditional statements together with the
logical operations we encountered back in <a href="../%7B%7B%20page.root%20%7D%7D/01-intro.hmtl#logical-operations">lesson
01</a>. The simplest conditional statement consists starts with an
<code>if</code>, and concludes with an <code>end</code>, like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">127</span><span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'before conditional...'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'The number is greater than 100'</span>)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'...after conditional'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
The number is greater than 100
...after conditional</code></pre>
</div>
<p>Now try changing the value of <code>num</code> to, say, 53:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
...after conditional</code></pre>
</div>
<p>MATLAB skipped the code inside the conditional statement because the
logical operation returned false.</p>
<p>The choice making is not quite complete yet. We have managed to “do”
or “not do” something, but we have not managed to choose between to
actions. For that, we need to introduce the keyword <code>else</code> in
the conditional statement, like this:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'before conditional...'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'The number is greater than 100'</span>)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'The number is not greater than 100'</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'...after conditional'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
The number is not greater than 100
...after conditional</code></pre>
</div>
<p>If the logical operation that follows is true, the body of the
<code>if</code> statement (i.e., the lines between <code>if</code> and
<code>else</code>) is executed. If the logical operation returns false,
the body of the <code>else</code> statement (i.e., the lines between
<code>else</code> and <code>end</code>) is executed instead. Only one of
these statement bodies is ever executed, never both.</p>
<p>We can also “nest” a conditional statements inside another
conditional statement.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'before conditional...'</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'The number is greater than 100'</span>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'The number is not greater than 100'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">50</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>        <span class="va">disp</span>(<span class="ss">'But it is greater than 50...'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'...after conditional'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
The number is not greater than 100
But it is greater than 50...
...after conditional</code></pre>
</div>
<p>This “nesting” can be quite useful, so MATLAB has a special keyword
for it. We can chain several tests together using <code>elseif</code>.
This makes it simple to write a script that gives the sign of a
number:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">%CONDITIONAL_DEMO   Demo script to illustrate use of conditionals</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is positive'</span>)</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is zero'</span>)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is negative'</span>)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Recall that we use a double equals sign <code>==</code> to test for
equality rather than a single equals sign (which assigns a value to a
variable).</p>
<p>During a conditional statement, if one of the conditions is true,
this marks the end of the test: no subsequent conditions will be tested
and execution jumps to the end of the conditional.</p>
<p>Let’s demonstrate this by adding another condition which is true.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">% Demo script to illustrate use of conditionals</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is positive'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is zero'</span>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">50</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    <span class="co">% This block will never be executed</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is greater than 50'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is negative'</span>)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We can also combine logical operations, using <code>&amp;&amp;</code>
(and) and <code>||</code> (or), as we did before:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">if</span> ((<span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">&amp;&amp;</span> (<span class="op">-</span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>))</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'both parts are true'</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'At least one part is not true'</span>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>At least one part is not true</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">if</span> (<span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">0</span>) <span class="op">||</span> (<span class="fl">3</span> <span class="op">&lt;</span> <span class="fl">4</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'At least one part is true'</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>at least one part is true</code></pre>
</div>
<div id="true-and-false-statements" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="true-and-false-statements" class="callout-inner">
<h3 class="callout-title">True and False Statements</h3>
<div class="callout-content">
<p>The operations we tested above evaluate to a logical value:
<code>true</code> or <code>false</code>. However these numerical
comparison tests aren’t the only values which are <code>true</code> or
<code>false</code> in MATLAB. For example, <code>1</code> is considered
<code>true</code> and <code>0</code> is considered <code>false</code>.
In fact, <em>any</em> value can be used in a conditional statement.</p>
<p>Run the code below in order to discover which values are considered
<code>true</code> and which are considered <code>false</code>.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">if</span> <span class="ss">''</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty string is true'</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty string is false'</span>)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="kw">if</span> <span class="ss">'foo'</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty string is true'</span>)</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty string is false'</span>)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="kw">if</span> []</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty array is true'</span>)</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty array is false'</span>)</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="kw">if</span> [<span class="fl">22.5</span><span class="op">,</span> <span class="fl">1.0</span>]</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty array is true'</span>)</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty array is false'</span>)</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="kw">if</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>]</span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'array of zeros is true'</span>)</span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'array of zeros is false'</span>)</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a><span class="kw">if</span> <span class="va">true</span></span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'true is true'</span>)</span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'true is false'</span>)</span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="close-enough" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="close-enough" class="callout-inner">
<h3 class="callout-title">Close Enough</h3>
<div class="callout-content">
<p>Write a script called <code>near</code> that performs a test on two
variables, and displays <code>1</code> when the first variable is within
10% of the other and <code>0</code> otherwise. Compare your
implementation with your partner’s: do you get the same answer for all
possible pairs of numbers?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co">%NEAR   Display 1 if variable a is within 10% of variable b</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">%       and display 0 otherwise</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="va">a</span> <span class="op">=</span> <span class="fl">1.1</span><span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="va">b</span> <span class="op">=</span> <span class="fl">1.2</span><span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="kw">if</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span> <span class="op">&gt;=</span> <span class="fl">0.9</span> <span class="op">&amp;&amp;</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span> <span class="op">&lt;=</span> <span class="fl">1.1</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="fl">1</span>)</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>    <span class="va">disp</span>(<span class="fl">0</span>)</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="scripts-with-choices">Scripts with choices<a class="anchor" aria-label="anchor" href="#scripts-with-choices"></a>
</h2>
<hr class="half-width">
<p>In the last lesson, we wrote a script that saved several plots to
disk. It would nice if our script could be more flexible. Could we
modify it so that it either saved the plots to disk <em>or</em>
displayed them on screen? Could we do this in such a way to make it easy
to change between the two behaviours? This is something that conditional
statements allow us to do.</p>
<p>We introduce a variable <code>save_plots</code> that we can set to
either <code>true</code> or <code>false</code> and modify our script so
that when <code>save_plots = true</code> the plots are saved to disk,
and when <code>save_plots = false</code> the plots are printed to the
screen.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co">% PLOT_DAILY_AVERAGE_OPTION   Plots daily average, max and min inflammation across patients. If save_plots is set to </span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">% true, the figures are saved to disk. If save_plots is set to false, the figures are displayed on the screen.</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/base/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="va">save_plots</span><span class="op">=</span><span class="va">true</span><span class="op">;</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="kw">if</span> <span class="va">save_plots</span> <span class="op">==</span> <span class="va">true</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>    <span class="va">figure</span>(<span class="va">visible</span><span class="op">=</span><span class="ss">'off'</span>)</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>    <span class="va">figure</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="co">% Define tiled layout and labels</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="va">tlo</span> <span class="op">=</span> <span class="va">tiledlayout</span>(<span class="fl">1</span><span class="op">,</span><span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="va">xlabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="ss">'Day of trial'</span>)</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="va">ylabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="ss">'Inflammation'</span>)</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a><span class="co">% Plot max inflammation per day</span></span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a><span class="co">% Plot min inflammation per day</span></span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a><span class="va">nexttile</span></span>
<span id="cb16-32"><a href="#cb16-32" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb16-33"><a href="#cb16-33" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb16-34"><a href="#cb16-34" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" tabindex="-1"></a><span class="kw">if</span> <span class="va">save_plots</span> <span class="op">==</span> <span class="va">true</span> </span>
<span id="cb16-36"><a href="#cb16-36" tabindex="-1"></a>    <span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb16-37"><a href="#cb16-37" tabindex="-1"></a>    <span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="ss">'results/daily_average_01.png'</span>)</span>
<span id="cb16-38"><a href="#cb16-38" tabindex="-1"></a></span>
<span id="cb16-39"><a href="#cb16-39" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb16-40"><a href="#cb16-40" tabindex="-1"></a></span>
<span id="cb16-41"><a href="#cb16-41" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Save the script in a file names
<code>plot_daily_average_option.m</code> and investigate what setting
the variable <code>save_plots</code> to <code>true</code> and
<code>false</code> does.</p>
<div id="changing-behaviour-based-on-patient-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="changing-behaviour-based-on-patient-data" class="callout-inner">
<h3 class="callout-title">Changing behaviour based on patient data</h3>
<div class="callout-content">
<p>We’d like to improve our <code>patient_analysis</code> script from
the previous lesson, specifically it’s output. Currently the script
displays <code>0</code> or <code>1</code> to indicate whether or not the
patient has a high mean, has a maximum equivalent to the highest in the
dataset, and has a minimum equivalent to the lowest in the dataset.
Instead, we’d like the script to print a line of descriptive text only
when each of these is true:</p>
<ol style="list-style-type: decimal">
<li>The mean inflammation for the patient is higher than the global
mean.</li>
<li>The maximum inflammation for the patient is the same as the global
maximum.</li>
<li>The minimum inflammation for the patient is the same as the global
minimum.</li>
<li>If none of the above is the case, then the script should print a
line informing us that the patient’s mean, maximum and minimum
inflammation are not remarkable.</li>
</ol>
<p>Using the <code>patient_analysis</code> script from the previous
lesson as a starting point (shown below for reference), can you use
conditional statements to make a script that does this?</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/base/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co">% Compute global statistics</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="va">patient_number</span> <span class="op">=</span> <span class="fl">8</span><span class="op">;</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="co">% Compute patient statistics</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="co">% Compare patient vs global</span></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Patient:'</span>)</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="va">disp</span>(<span class="va">patient_number</span>)</span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'High mean?'</span>)</span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Highest max?'</span>)</span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Lowest min?'</span>)</span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span></code></pre>
</div>
<p>There are several different ways to do this, so compare your finished
script with your neighbour and see if you did it the same way.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">% Load patient data</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/base/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">% Compute global statistics</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="va">patient_number</span> <span class="op">=</span> <span class="fl">8</span><span class="op">;</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">% Compute patient statistics</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="co">% Compare patient vs global</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'Patient:'</span>)</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="va">disp</span>(<span class="va">patient_number</span>)</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="va">printed_something</span> <span class="op">=</span> <span class="va">false</span><span class="op">;</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="kw">if</span> <span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Patient''s mean inflammation is higher than the global mean inflammation.'</span>)</span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>    <span class="va">printed_something</span> <span class="op">=</span> <span class="va">true</span><span class="op">;</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a><span class="kw">if</span> <span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Patient''s maximum inflammation is the same as the global maximum.'</span>)</span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a>    <span class="va">printed_something</span> <span class="op">=</span> <span class="va">true</span><span class="op">;</span></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a><span class="kw">if</span> <span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Patient''s minimum inflammation is the same as the global minimum.'</span>)</span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a>    <span class="va">printed_something</span> <span class="op">=</span> <span class="va">true</span><span class="op">;</span></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a></span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a><span class="kw">if</span> <span class="va">printed_something</span> <span class="op">==</span> <span class="va">false</span></span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Patient''s mean, maximum and minimum inflammation are not of interest.'</span>)</span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use conditional statements to make choices based on values in your
program.</li>
<li>A conditional statement block starts with an <code>if</code> and
finishes with <code>end</code>. It can also include an
<code>else</code>.</li>
<li>Use <code>elseif</code> to nest conditional statements.</li>
<li>Use <code>&amp;&amp;</code> (and), <code>||</code> (or) to combine
logical operations.</li>
<li>Only one of the statement bodies is ever executed.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-func"><p>Content from <a href="07-func.html">Creating Functions</a></p>
<hr>
<p>Last updated on 2023-12-04 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/07-func.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 65 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I teach MATLAB to do new things?</li>
<li>How can I make programs I write more reliable and re-usable?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to write a function</li>
<li>Define a function that takes arguments.</li>
<li>Compare and contrast MATLAB function files with MATLAB scripts.</li>
<li>Recognise why we should divide programs into small, single-purpose
functions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="writing-functions-from-scratch">Writing functions from scratch<a class="anchor" aria-label="anchor" href="#writing-functions-from-scratch"></a>
</h2>
<hr class="half-width">
<p>It has come to our attention that the data about inflammation that
we’ve been analysing contains some systematic errors. The measurements
were made using the incorrect scale, with inflammation recorded in
Arbitrary Inflammation Units (AIU) rather than the scientific standard
International Inflmmation Units (IIU). Luckily there is a handy formula
which can be used for converting measurements in AIU to IIU, but it
involves some hard to remember constants:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">inflammation_IIU</span> <span class="op">=</span> (<span class="va">inflammation_AIU</span> <span class="op">+</span> <span class="va">B</span>)<span class="op">*</span><span class="va">A</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> <span class="fl">5.634</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="fl">0.275</span></span></code></pre>
</div>
<p>There are twelve files worth of data to be converted from AIU to IIU:
is there a way we can do this quickly and conveniently? If we have to
re-enter the conversion formula multiple times, the chance of us getting
the constants wrong is high. Thankfully there is a convenient way to
teach MATLAB how to do new things, like converting units from AIU to
IIU. We can do this by writing a function.</p>
<p>We have already used some predefined MATLAB functions which we can
pass arguments to. How can we define our own?</p>
<p>A MATLAB function <em>must</em> be saved in a text file with a
<code>.m</code> extension. The name of the file must be the same as the
name of the function defined in the file.</p>
<p>The first line of our function is called the <em>function
definition</em> and must include the special <code>function</code>
keyword to let MATLAB know that we are defining a function. Anything
following the function definition line is called the <em>body</em> of
the function. The keyword <code>end</code> marks the end of the function
body. The function only knows about code that comes between the function
definition line and the <code>end</code> keyword. It will not have
access to variables from outside this block of code apart from those
that are passed in as <em>arguments</em> or <em>input parameters</em>.
The rest of our code won’t have access to any variables from inside this
block, apart from those that are passed out as <em>output
parameters</em>.</p>
<p>A function can have multiple input and output parameters as required,
but doesn’t have to have any. The general form of a function is shown in
the pseudo-code below:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">function</span> [<span class="va">out1</span><span class="op">,</span> <span class="va">out2</span>] <span class="op">=</span> <span class="va">function_name</span>(<span class="va">in1</span><span class="op">,</span> <span class="va">in2</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="co">% FUNCTION_NAME   Function description</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="co">%    Can add more text for the function help</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="co">%    An example is always useful!</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="co">% This section below is called the body of the function</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    <span class="va">out1</span> <span class="op">=</span> <span class="va">calculation</span> <span class="va">using</span> <span class="va">in1</span> <span class="va">and</span> <span class="va">in2</span><span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    <span class="va">out2</span> <span class="op">=</span> <span class="va">another</span> <span class="va">calculation</span><span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Just as we saw with scripts, functions must be <em>visible</em> to
MATLAB, i.e., a file containing a function has to be placed in a
directory that MATLAB knows about. Following the same logic we used with
scripts, we will put our source code files in the <code>src</code>
folder.</p>
<p>Let’s put this into practice to create a function that will teach
MATLAB to use our AIU to IIU conversion formula. Create a file called
<code>inflammation_AIU_to_IIU.m</code> in the <code>src</code> folder,
enter the following function definition, and save the file:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">inflammation_in_IIU</span> <span class="op">=</span> <span class="va">inflammation_AIU_to_IIU</span>(<span class="va">inflammation_in_AIU</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>   <span class="co">% INFLAMMATION_AIU_TO_IIU  Convert inflammation mesured in AIU to inflammation measued in IIU.</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>   <span class="va">A</span> <span class="op">=</span> <span class="fl">0.275</span><span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>   <span class="va">B</span> <span class="op">=</span> <span class="fl">5.634</span><span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>   <span class="va">inflammation_in_IIU</span> <span class="op">=</span> (<span class="va">inflammation_in_AIU</span> <span class="op">+</span> <span class="va">B</span>)<span class="op">*</span><span class="va">A</span><span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We can now call our function as we would any other function in
MATLAB:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">inflammation_AIU_to_IIU</span>(<span class="fl">0.5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">1.6869</span></span></code></pre>
</div>
<p>We got the number we expected, and at first glance it seems like it
is almost the same as a script. However, if you look at the variables in
the workspace, you’ll probably notice one big difference. Although a
variable called <code>inflammation_in_IIU</code> was defined in the
function, it does not exist in our workspace.</p>
<p>Lets have a look using the debugger to see what is happening.</p>
<p>When we pass a value, like <code>0.5</code>, to the function, it is
assigned to the variable <code>inflammation_in_AIU</code> so that it can
be used in the body of the function. To return a value from the
function, we must assign that value to the variable
<code>inflammation_in_IIU</code> from our function definition line. What
ever value <code>inflammation_in_IIU</code> has when the
<code>end</code> keyword in the function definition is reached, that
will be the value returned.</p>
<p>Outside the function, the variables <code>inflammation_in_AIU</code>,
<code>inflammation_in_IIU</code>, <code>A</code>, and <code>B</code>
aren’t accessible; they are only used by in function body.</p>
<p>This is one of the major differences between scripts and functions: a
script can be thought of as automating the command line, with full
access to all variables in the base workspace, whereas a function has
its own separate workspace.</p>
<p>To be able to access variables from your workspace inside a function,
you have to pass them in as inputs. To be able to save variables to your
workspace, it needs to return them as outputs.</p>
<p>As with any operation, if we want to save the result, we need to
assign the result to a variable, for example:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">val_in_IIU</span> <span class="op">=</span> <span class="va">inflammation_AIU_to_IIU</span>(<span class="fl">0.5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">val_in_IIU</span> <span class="op">=</span> <span class="fl">1.6869</span></span></code></pre>
</div>
<p>And we can see <code>val_in_IIU</code> saved in our workspace.</p>
<div id="writing-your-own-conversion-function" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="writing-your-own-conversion-function" class="callout-inner">
<h3 class="callout-title">Writing your own conversion function</h3>
<div class="callout-content">
<p>We’d like a function that reverses the conversion of AIU to IIU.
Re-arrange the conversion formula and write a function called
<code>inflammation_IIU_to_AIU</code> that converts inflammation measued
in IIU to inflammation measured in AIU.</p>
<p>Remember to save your function definition in a file with the required
name, start the file with the function definition line, followed by the
function body, ending with the <code>end</code> keyword.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">inflammation_in_AIU</span> <span class="op">=</span> <span class="va">inflammation_IIU_to_AIU</span>(<span class="va">inflammation_in_IIU</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>   <span class="co">% INFLAMMTION_IIU_TO_AIU   Convert inflammation measured in IIU to inflammation measured in AIU.</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>   <span class="va">A</span> <span class="op">=</span> <span class="fl">0.275</span><span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>   <span class="va">B</span> <span class="op">=</span> <span class="fl">5.634</span><span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>   <span class="va">inflammation_in_AIU</span> <span class="op">=</span> <span class="va">inflammation_in_IIU</span><span class="op">/</span><span class="va">A</span> <span class="op">-</span> <span class="va">B</span><span class="op">;</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="functions-that-work-on-arrays" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="functions-that-work-on-arrays" class="callout-inner">
<h3 class="callout-title">Functions that work on arrays</h3>
<div class="callout-content">
<p>One of the benefits of writing functions in MATLAB is that often they
will also be able to operate on an array of numerical variables <em>for
free</em>.</p>
<p>This will work when each operation in the function can be applied to
an array too. In our example, we are adding a number and multiplying by
another, both of which work on arrays.</p>
<p>This will make converting the inflammation data in our files using
the function we’ve just written very quick. Give it a go!</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="transforming-scripts-into-functions">Transforming scripts into functions<a class="anchor" aria-label="anchor" href="#transforming-scripts-into-functions"></a>
</h2>
<hr class="half-width">
<p>In the <code>patient_analysis</code> script we created, we can choose
which patient to analyse by modifying the variable
<code>patient_number</code>. If we want information about patient 13, we
need to open <code>patient_analysis.m</code>, go to line 9, modify the
variable, save and then run <code>patient_analysis</code>. This is a lot
of steps for such a simple request.</p>
<p>Can we use what we’ve learned about writing functions to transform
(or <em>refactor</em>) our script into a function, increasing its
usefulness in the process?</p>
<p>We already have a <code>.m</code> file called
<code>patient_analysis</code>, so lets begin by defining a function with
that name.</p>
<p>Open the <code>patient_analysis.m</code> file, if you don’t already
have it open. Instead of line 9, where <code>patient_number</code> is
set, we want to provide that variable as an input. So lets remove that
line, and right at the top of our script we’ll add the function
definition telling MATLAB what our function is called and what inputs it
needs. The function will take the variable <code>patient_number</code>
as input and since we removed the line that assigned a value to that
variable, the input will decide which patient is analysed.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">patient_analysis</span>(<span class="va">patient_number</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="co">% PATIENT_ANALYSIS   Computes mean, max and min of a patient and compares to global statistics.</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="co">%    Takes the patient number as an input, and prints the relevant information to console.</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="co">%    Sample usage:</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="co">%       patient_analysis(5)</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="co">% Load patient data</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/base/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    <span class="co">% Compute global statistics</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>    <span class="va">g_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    <span class="va">g_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    <span class="va">g_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>    <span class="co">% Compute patient statistics</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>    <span class="va">p_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    <span class="va">p_max</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>    <span class="va">p_min</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">patient_data</span>(<span class="va">patient_number</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>    <span class="co">% Compare patient vs global</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Patient:'</span>)</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">patient_number</span>)</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'High mean?'</span>)</span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">p_mean</span> <span class="op">&gt;</span> <span class="va">g_mean</span>)</span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Highest max?'</span>)</span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">p_max</span> <span class="op">==</span> <span class="va">g_max</span>)</span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'Lowest min?'</span>)</span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">p_min</span> <span class="op">==</span> <span class="va">g_min</span>)</span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Congratulations! You’ve now created a MATLAB function from a MATLAB
script!</p>
<p>You may have noticed that the code inside the function is indented.
MATLAB does not need this, but it makes it much more readable!</p>
<p>Lets clear our workspace and run our function in the command
line:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clc</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_analysis</span>(<span class="fl">13</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 13:
High mean?
   0
Highest max?
   0
Lowest min?
   1</code></pre>
</div>
<p>So now we can get the patient analysis of whichever patient we want,
and we do not need to modify <code>patient_analysis.m</code> anymore.
However, you may have noticed that we have no variables in our
workspace. Remember, inside the function, the variables
<code>patient_data</code>, <code>g_mean</code>, <code>g_max</code>,
<code>g_min</code>, <code>p_mean</code>, <code>p_max</code>, and
<code>p_min</code> are created, but then they are deleted when the
function ends. If we want to save them, we need to pass them as
outputs.</p>
<p>Lets say, for example, that we want to save the mean of each patient.
In our <code>patient_analysis.m</code> we already compute the value and
save it in <code>p_mean</code>, but we need to tell MATLAB that we want
the function to return it.</p>
<p>To do that we modify the function definition like this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">p_mean</span> <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="va">patient_number</span>)</span></code></pre>
</div>
<p>It is important that the variable name is the same that is used
inside the function.</p>
<p>If we now run our function in the command line, we get:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="va">p13</span> <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="fl">13</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   0
Highest max?
   0
Lowest min?
   1

p13 =
    0.1049</code></pre>
</div>
<p>We could return more outputs if we want. For example, lets return the
min and max as well. To do that, we need to specify all the outputs in
square brackets, as an array. So we need to replace the function
definition for:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="kw">function</span> [<span class="va">p_mean</span><span class="op">,</span><span class="va">p_max</span><span class="op">,</span><span class="va">p_min</span>] <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="va">patient_number</span>)</span></code></pre>
</div>
<p>To call our function now we need to provide space for all 3 outputs,
so in the command line, we run it as:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>[<span class="va">p13_mean</span><span class="op">,</span><span class="va">p13_max</span><span class="op">,</span><span class="va">p13_min</span>] <span class="op">=</span> <span class="va">patient_analysis</span>(<span class="fl">13</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient 5:
High mean?
   0
Highest max?
   0
Lowest min?
   1
p13_mean =
    0.1049
p13_max =
    0.3450
p13_min =
     0</code></pre>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>Note</strong> If you had not provided space for all the
outputs, Matlab assumes you are only interested in the first one, so
<code>ans</code> would save the mean.</p>
</div>
</div>
</div>
<div id="plotting-daily-average-of-different-data-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-daily-average-of-different-data-files" class="callout-inner">
<h3 class="callout-title">Plotting daily average of different data files</h3>
<div class="callout-content">
<p>Look back at the <code>plot_daily_average</code> script. The data and
resulting image file names are hard-coded in the script. We actually
have 12 datafiles. Turn the script into a function that lets you
generate the plots for any of the files.</p>
<p>The function should operate on a single data file, and should have
two parameters: <code>data_file</code> and <code>plot_file</code>. When
called, the function should create the three graphs, and save the plot
as <code>plot_file</code>.</p>
<p>You should mostly be reusing code from the <code>plot_all</code>
script.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">plot_daily_average</span>(<span class="va">data_file</span><span class="op">,</span><span class="va">plot_name</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>    <span class="co">%PLOT_DAILY_AVERAGE   Plots daily average, max and min inflammation accross patients.</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="co">%   The function takes the data in data_file and saves it as plot_name</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    <span class="co">%   Example usage:</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    <span class="co">%       plot_daily_average('data/base/inflammation-03.csv','results/plot3.png')</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>    <span class="co">% Load patient data</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">data_file</span>)<span class="op">;</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>    <span class="va">figure</span>(<span class="va">visible</span><span class="op">=</span><span class="ss">'off'</span>)</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>    <span class="co">% Define tiled layout and labels</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>    <span class="va">tlo</span> <span class="op">=</span> <span class="va">tiledlayout</span>(<span class="fl">1</span><span class="op">,</span><span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="ss">'Day of trial'</span>)</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="va">tlo</span><span class="op">,</span><span class="ss">'Inflammation'</span>)</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>    <span class="co">% Plot average inflammation per day</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>    <span class="va">nexttile</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>    <span class="co">% Plot max inflammation per day</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>    <span class="va">nexttile</span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a>    <span class="co">% Plot min inflammation per day</span></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>    <span class="va">nexttile</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a>    <span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>    <span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="va">plot_name</span>)</span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="plotting-patient-vs-mean" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-patient-vs-mean" class="callout-inner">
<h3 class="callout-title">Plotting patient vs mean</h3>
<div class="callout-content">
<p>Create a function called <code>patient_vs_mean</code> that generates
a plot like this one:</p>
<figure><img src="../fig/plotting_average_inflammation_and_patient_5_with_legend.svg" alt="Plotting patient vs mean" class="figure mx-auto d-block"></figure><p>The function should have the following inputs:</p>
<ul>
<li><p><code>per_day_mean</code> - A 1D array with the average
inflammation per day already loaded (you’ll have to load the data and
compute per_day_mean before calling the function).</p></li>
<li><p><code>patient_data</code> - A 1D array with the data for the
patient of interest only.</p></li>
<li><p><code>patient_reference</code> - A string that will be used to
identify the patient on the plot, and also as a file name (you should
add the extension <code>png</code> in your function).</p></li>
</ul>
<p>When called, the function should create and save the plot as
<code>patient_reference</code>.png in the results folder.</p>
<p>Look back at the previous lessons if you need to!</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">patient_vs_mean</span>(<span class="va">per_day_mean</span><span class="op">,</span><span class="va">patient_data</span><span class="op">,</span><span class="va">patient_reference</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="co">% PATIENT_VS_MEAN   Plots the global mean and patient inflammation on top of each other.</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    <span class="co">%   per_day_mean should be a vector with the global mean.</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="co">%   patient_data should be a vector with only the patient data.</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="co">%   patient_reference will be used to identify the patient on the plot.</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="co">%</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>    <span class="co">%   Sample usage:</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>    <span class="co">%       patient_data = readmatrix('data/base/inflammation-01.csv');</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>    <span class="co">%       per_day_mean = mean(patient_data);</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>    <span class="co">%       patient_vs_mean(per_day_mean,patient_data(5,:),"Patient 5")</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>    <span class="va">figure</span>(<span class="va">visible</span><span class="op">=</span><span class="ss">'off'</span>)</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>    <span class="co">%Plot per_day_mean</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">per_day_mean</span><span class="op">,</span><span class="va">DisplayName</span><span class="op">=</span><span class="st">"Mean"</span>)</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a>    <span class="va">legend</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a>    <span class="co">%Overlap patient data</span></span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a>    <span class="va">hold</span> <span class="va">on</span></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">patient_data</span><span class="op">,</span><span class="va">DisplayName</span><span class="op">=</span><span class="va">patient_reference</span>)</span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a>    <span class="va">hold</span> <span class="va">off</span></span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a>    <span class="co">% Save plot</span></span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a>    <span class="va">saveas</span>(<span class="va">gcf</span><span class="op">,</span><span class="st">"results/"</span><span class="op">+</span><span class="va">patient_reference</span><span class="op">+</span><span class="st">".png"</span>)</span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a></span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A MATLAB function <em>must</em> be saved in a text file with a
<code>.m</code> extension. The name of the file must be the same as the
name of the function defined in the file.</li>
<li>Define functions using the <code>function</code> keyword to start
the definition, and close the definition with the keyword
<code>end</code>.</li>
<li>Functions have an independent workspace. Access variables from your
workspace inside a function by passing them as inputs. Access variables
from the function returning them as outputs.</li>
<li>The header of a function with inputs an outputs has the form:</li>
</ul>
<p><code>function [output_1,output_2,...] = function_name(input_1,input_2,...)</code></p>
<ul>
<li>Break programs up into short, single-purpose functions with
meaningful names.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-08-loops"><p>Content from <a href="08-loops.html">Repeating With Loops</a></p>
<hr>
<p>Last updated on 2023-12-04 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/08-loops.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 50 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I repeat the same operations on multiple values?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what a for loop does.</li>
<li>Correctly write for loops that repeat simple commands.</li>
<li>Trace changes to a loop variable as the loops runs.</li>
<li>Use a for loop to process multiple files.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Recall that we have twelve datasets in total. We’re going to need a
better way to analyse them all than typing out commands for each one,
because we’ll find ourselves writing a lot of duplicated code. Code that
is repeated in two or more places will eventually be wrong in at least
one as our project develops over time. Also, if we make changes in the
way we analyse our datasets, we have to introduce that change in every
copy of our code. To avoid all of this repetition, we have to teach
MATLAB to repeat our commands, and to do <em>that</em>, we have to learn
how to write <em>loops</em>.</p>
<p>We’ll start with an example. Suppose we want to print each character
in the word “lead” on a line of its own. One way is to use four
<code>disp</code> statements:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'lead'</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span>))</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">2</span>))</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">3</span>))</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">4</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">l</span></span>
<span><span class="va">e</span></span>
<span><span class="va">a</span></span>
<span><span class="va">d</span></span></code></pre>
</div>
<p>But this is a bad approach for two reasons:</p>
<ol style="list-style-type: decimal">
<li><p>It doesn’t scale: if we want to print the characters in a string
that’s hundreds of letters long, we’d be better off typing them
in.</p></li>
<li><p>It’s fragile: if we change <code>word</code> to a longer string,
it only prints part of the data, and if we change it to a shorter one,
it produces an error, because we’re asking for characters that don’t
exist.</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'tin'</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span>))</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">2</span>))</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">3</span>))</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">4</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>error: A(I): index out of bounds; value 4 out of bound 3</code></pre>
</div>
<p>There’s a better approach:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'lead'</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">l</span></span>
<span><span class="va">e</span></span>
<span><span class="va">a</span></span>
<span><span class="va">d</span></span></code></pre>
</div>
<p>This improved version uses a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#for-loop">for loop</a>
to repeat an operation — in this case, printing to the screen — once for
each element in an array.</p>
<p>The general form of a for loop is:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">for</span> <span class="va">variable</span> <span class="op">=</span> <span class="va">collection</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    # <span class="va">Do</span> <span class="va">things</span> <span class="va">with</span> <span class="va">variable</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>The for loop executes the commands in the <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#loop-body">loop
body</a> for every value in the array <code>collection</code>. This
value is called the <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#loop-variable">loop
variable</a>, and we can call it whatever we like. In our example, we
gave it the name <code>letter</code>.</p>
<p>We have to terminate the loop body with the <code>end</code> keyword,
and we can have as many commands as we like in the loop body. But, we
have to remember that they will all be repeated as many times as there
are values in <code>collection</code>.</p>
<p>Our for loop has made our code more scalable, and less fragile.
There’s still one little thing about it that should bother us. For our
loop to deal appropriately with shorter or longer words, we have to
change the first line of our loop by hand:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'tin'</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">t</span></span>
<span><span class="va">i</span></span>
<span><span class="va">n</span></span></code></pre>
</div>
<p>Although this works, it’s not the best way to write our loop:</p>
<ul>
<li><p>We might update <code>word</code> and forget to modify the loop
to reflect that change.</p></li>
<li><p>We could make a mistake while counting the number of letters in
<code>word</code>.</p></li>
</ul>
<p>Fortunately, MATLAB provides us with a convenient function to write a
better loop:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminum'</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">word</span>)</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="va">l</span></span>
<span><span class="va">u</span></span>
<span><span class="va">m</span></span>
<span><span class="va">i</span></span>
<span><span class="va">n</span></span>
<span><span class="va">u</span></span>
<span><span class="va">m</span></span></code></pre>
</div>
<p>This is much more robust code, as it can deal with words of arbitrary
length. Loops are not only for working with strings, they allow us to do
repetitive calculations regardless of data type. Here’s another loop
that calculates the sum of all even numbers between 1 and 10:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="va">total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">even_number</span> <span class="op">=</span> <span class="fl">2</span> <span class="op">:</span> <span class="fl">2</span> <span class="op">:</span> <span class="fl">10</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="va">total</span> <span class="op">=</span> <span class="va">total</span> <span class="op">+</span> <span class="va">even_number</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'The sum of all even numbers between 1 and 10 is:'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="va">disp</span>(<span class="va">total</span>)</span></code></pre>
</div>
<p>It’s worth tracing the execution of this little program step by
step.</p>
<div id="the-debugger" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-debugger" class="callout-inner">
<h3 class="callout-title">The debugger</h3>
<div class="callout-content">
<p>We can use the MATLAB debugger to trace the execution of a
program.</p>
<p>The first step is to set a <strong>break point</strong> by clicking
just to the right of a line number on the <code>-</code> symbol. A red
circle will appear — this is the break point, and when we run the
script, MATLAB will pause execution at that line.</p>
<p>A green arrow appears, pointing to the next line to be run. To
continue running the program one line at a time, we use the
<code>step</code> button.</p>
<p>We can then inspect variables in the workspace or by hovering the
cursor over where they appear in the code, or get MATLAB to evaluate
expressions in the command window (notice the prompt changes to
<code>K&gt;&gt;</code>).</p>
<p>This process is useful to check your understanding of a program, in
order to correct mistakes.</p>
<p>This process is illustrated below: <img src="../fig/debugger.gif" alt="debugger-demo" class="figure"></p>
</div>
</div>
</div>
<p>Since we want to sum only even numbers, the loop index
<code>even_number</code> starts at 2 and increases by 2 with every
iteration. When we enter the loop, <code>total</code> is zero - the
value assigned to it beforehand. The first time through, the loop body
adds the value of the first even number (2) to the old value of
<code>total</code> (0), and updates <code>total</code> to refer to that
new value. On the next loop iteration, <code>even_number</code> is 4 and
the initial value of <code>total</code> is 2, so the new value assigned
to <code>total</code> is 6. After <code>even_number</code> reaches the
final value (10), <code>total</code> is 30; since this is the end of the
range for <code>even_number</code> the loop finishes and the
<code>disp</code> statements give us the final answer.</p>
<p>Note that a loop variable is just a variable that’s being used to
record progress in a loop. It still exists after the loop is over, and
we can re-use variables previously defined as loop variables as
well:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">even_number</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span></code></pre>
</div>
<div id="performing-exponentiation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="performing-exponentiation" class="callout-inner">
<h3 class="callout-title">Performing Exponentiation</h3>
<div class="callout-content">
<p>MATLAB uses the caret (<code>^</code>) to perform exponentiation:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">5</span><span class="op">^</span><span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">125</span></span></code></pre>
</div>
<p>You can also use a loop to perform exponentiation. Remember that
<code>b^x</code> is just <code>b*b*b*</code>… <code>x</code> times.</p>
<p>Let a variable <code>b</code> be the base of the number and
<code>x</code> the exponent. Write a loop to compute <code>b^x</code>.
Check your result for <code>b = 4</code> and <code>x = 5</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">% Loop to perform exponentiation</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="va">b</span> <span class="op">=</span> <span class="fl">4</span><span class="op">;</span>    <span class="co">% base</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="va">x</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>    <span class="co">% exponent</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="va">result</span><span class="op">=</span><span class="fl">1</span><span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">x</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="va">result</span> <span class="op">=</span> <span class="va">result</span> <span class="op">*</span> <span class="va">b</span><span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">b</span>)<span class="op">,</span> <span class="ss">'^'</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">x</span>)<span class="op">,</span> <span class="ss">' = '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">result</span>)])</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="incrementing-with-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="incrementing-with-loops" class="callout-inner">
<h3 class="callout-title">Incrementing with Loops</h3>
<div class="callout-content">
<p>Write a loop that spells the word “aluminum,” adding one letter at a
time:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="va">al</span></span>
<span><span class="va">alu</span></span>
<span><span class="va">alum</span></span>
<span><span class="va">alumi</span></span>
<span><span class="va">alumin</span></span>
<span><span class="va">aluminu</span></span>
<span><span class="va">aluminum</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">% spell a string adding one letter at a time using a loop</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminium'</span><span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">word</span>)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span><span class="op">:</span><span class="va">letter</span>))</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="looping-in-reverse" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="looping-in-reverse" class="callout-inner">
<h3 class="callout-title">Looping in Reverse</h3>
<div class="callout-content">
<p>In MATLAB, the colon operator (<code>:</code>) accepts a <a href="../%7B%7B%20page.root%20%7D%7D/reference.html#stride">stride</a> or
skip argument between the start and stop:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1 4 7 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">11</span><span class="op">:-</span><span class="fl">3</span><span class="op">:</span><span class="fl">1</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>11 8 5 2</code></pre>
</div>
<p>Using this, write a loop to print the letters of “aluminum” in
reverse order, one letter per line.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">m</span></span>
<span><span class="va">u</span></span>
<span><span class="va">n</span></span>
<span><span class="va">i</span></span>
<span><span class="va">m</span></span>
<span><span class="va">u</span></span>
<span><span class="va">l</span></span>
<span><span class="va">a</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co">% Spell a string in reverse using a loop</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminium'</span><span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="va">length</span>(<span class="va">word</span>)<span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="analyzing-patient-data-from-multiple-files">Analyzing patient data from multiple files<a class="anchor" aria-label="anchor" href="#analyzing-patient-data-from-multiple-files"></a>
</h2>
<hr class="half-width">
<p>We now have almost everything we need to process multiple data files
using a loop and the plotting code in our
<code>plot_daily_average</code> function from the last lesson.</p>
<p>We will need to generate a list of data files to process, and then we
can use a loop to repeat the analysis for each file.</p>
<p>We can use the <code>dir</code> command to return a <strong>structure
array</strong> containing the names of the files in the
<code>data</code> directory. Each element in this <em>structure
array</em> is a <strong>structure</strong>, containing information about
a single file in the form of named <strong>fields</strong>.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/base/inflammation-*.csv'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>files =
  12×1 struct array with fields:
    name
    folder
    date
    bytes
    isdir
    datenum</code></pre>
</div>
<p>To access the <em>name</em> field of the first file, we can use the
following syntax:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">filename</span> <span class="op">=</span> <span class="va">files</span>(<span class="fl">1</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">filename</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>inflammation-01.csv</code></pre>
</div>
<p>To get the modification date of the third file, we can do:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mod_date</span> <span class="op">=</span> <span class="va">files</span>(<span class="fl">3</span>).<span class="va">date</span><span class="op">;</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">mod_date</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>06-Nov-2023 14:34:15</code></pre>
</div>
<p>A good first step towards processing multiple files is to write a
loop which prints the name of each of our files. Let’s write this in a
script <code>plot_all.m</code> which we will then develop further:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co">%PLOT_ALL	Developing code to automate inflammation analysis</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/base/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>	<span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>	<span class="va">disp</span>(<span class="va">file_name</span>)</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_all</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>inflammation-01.csv
inflammation-02.csv
inflammation-03.csv
inflammation-04.csv
inflammation-05.csv
inflammation-06.csv
inflammation-07.csv
inflammation-08.csv
inflammation-09.csv
inflammation-10.csv
inflammation-11.csv
inflammation-12.csv</code></pre>
</div>
<p>Another task is to generate the file names for the figures we’re
going to save. Let’s name the output file after the data file used to
generate the figure. So for the data set
<code>inflammation-01.csv</code> we will call the figure
<code>inflammation-01.png</code>. We can use the <code>replace</code>
command for this purpose.</p>
<p>The syntax for the <code>replace</code> command is like this:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="va">NEWSTR</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">STR</span><span class="op">,</span> <span class="va">OLD</span><span class="op">,</span> <span class="va">NEW</span>)</span></code></pre>
</div>
<p>So for example if we have the string <code>big_shark</code> and want
to get the string <code>little_shark</code>, we can execute the
following command:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">new_string</span> <span class="op">=</span> <span class="va">replace</span>(<span class="ss">'big_shark'</span><span class="op">,</span> <span class="ss">'big'</span><span class="op">,</span> <span class="ss">'little'</span>)<span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">new_string</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">little_shark</span></span></code></pre>
</div>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>In Octave, the <code>replace</code> function doesn’t exist, but the
<code>strrep</code> function is a direct replacement. The above example
becomes</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">new_string</span> <span class="op">=</span> <span class="va">strep</span>(<span class="ss">'big_shark'</span><span class="op">,</span> <span class="ss">'big'</span><span class="op">,</span> <span class="ss">'little'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="va">little_shark</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>Recall that we’re saving our figures to the <code>results</code>
directory. The best way to generate a path to a file in MATLAB is by
using the <code>fullfile</code> command. This generates a file path with
the correct separators for the platform you’re using (i.e. forward slash
for Linux and macOS, and backslash for Windows). This makes your code
more portable which is great for collaboration.</p>
<p>Putting these concepts together, we can now generate the paths for
the data files, and the image files we want to save:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co">%PLOT_ALL	Developing code to automate inflammation analysis</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/base/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>    <span class="co">% Generate string for image name</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="ss">'base'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span><span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">file_name</span>)</span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">img_name</span>)</span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data/inflammation-01.csv
results/inflammation-01.png
data/inflammation-02.csv
results/inflammation-02.png
data/inflammation-03.csv
results/inflammation-03.png
data/inflammation-04.csv
results/inflammation-04.png
data/inflammation-05.csv
results/inflammation-05.png
data/inflammation-06.csv
results/inflammation-06.png
data/inflammation-07.csv
results/inflammation-07.png
data/inflammation-08.csv
results/inflammation-08.png
data/inflammation-09.csv
results/inflammation-09.png
data/inflammation-10.csv
results/inflammation-10.png
data/inflammation-11.csv
results/inflammation-11.png
data/inflammation-12.csv
results/inflammation-12.png</code></pre>
</div>
<p>We’re now ready to modify <code>plot_all.m</code> to actually process
multiple data files:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co">%PLOT_ALL   Print statistics for all patients.</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="co">%           Save plots of statistics to disk.</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/base/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="co">% Process each file in turn</span></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>    <span class="co">% Generate strings for image names:</span></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb41-14"><a href="#cb41-14" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="ss">'base'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb41-15"><a href="#cb41-15" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span> <span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb41-16"><a href="#cb41-16" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" tabindex="-1"></a>    <span class="va">plot_daily_average</span>(<span class="va">file_name</span><span class="op">,</span> <span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb41-18"><a href="#cb41-18" tabindex="-1"></a></span>
<span id="cb41-19"><a href="#cb41-19" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We run the modified script using its name in the Command Window:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_all</span></span></code></pre>
</div>
<p>The first three figures output to the <code>results</code> directory
are as shown below:</p>
<figure><img src="../fig/inflammation-01.png" style="width:500px; height:400px" alt="inflammation-01.png" class="figure mx-auto d-block"></figure><figure><img src="../fig/inflammation-02.png" style="width:500px; height:400px" alt="inflammation-02.png" class="figure mx-auto d-block"></figure><figure><img src="../fig/inflammation-03.png" style="width:500px; height:400px" alt="inflammation-03.png" class="figure mx-auto d-block"></figure><p>We’ve now automated the generation of these figures for all the data
stored in our data folder. With minor modifications, this script could
be re-used to check all our future data files.</p>
<div id="investigating-patients-with-a-high-mean" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="investigating-patients-with-a-high-mean" class="callout-inner">
<h3 class="callout-title">Investigating patients with a high mean</h3>
<div class="callout-content">
<p>We’re particularly interested in patients who have a mean
inflammation higher than the global mean.</p>
<p>Write a script called <code>plot_high_mean_patients</code> that reads
in the file <code>inflammation-01.csv</code> and compares the patients
mean inflammation to the global mean. If their mean inflammation is
greater than the global inflammation, use the function
<code>patient_vs_mean</code> to save a plot of their inflammation to
disk for later analysis. Use both for loops and conditional statements
to do this.</p>
<p>Using what you’ve learned about dealing with multiple files, turn
this script into a function that takes the filename of a data file as
input and run it on all of the inflammation data files.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="co">% PLOT_HIGH_MEAN_PATIENTS   Saves plots of patients with mean inflammation higher than the global mean inflammation.</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/base/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a><span class="va">per_day_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>)<span class="op">;</span></span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a><span class="va">global_mean</span> <span class="op">=</span>  <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))<span class="op">;</span></span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a><span class="va">number_of_patients</span> <span class="op">=</span> <span class="va">size</span>(<span class="va">patient_data</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" tabindex="-1"></a><span class="kw">for</span> <span class="va">patient_id</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">number_of_patients</span></span>
<span id="cb43-11"><a href="#cb43-11" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" tabindex="-1"></a>    <span class="va">patient_mean</span> <span class="op">=</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="va">patient_id</span><span class="op">,:</span>))<span class="op">;</span></span>
<span id="cb43-13"><a href="#cb43-13" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" tabindex="-1"></a>    <span class="kw">if</span>(<span class="va">patient_mean</span> <span class="op">&gt;</span> <span class="va">global_mean</span>)</span>
<span id="cb43-15"><a href="#cb43-15" tabindex="-1"></a>        <span class="va">patient_reference</span> <span class="op">=</span> <span class="st">"Patient "</span> <span class="op">+</span> <span class="va">string</span>(<span class="va">patient_id</span>)</span>
<span id="cb43-16"><a href="#cb43-16" tabindex="-1"></a>        <span class="va">patient_vs_mean</span>(<span class="va">per_day_mean</span><span class="op">,</span> <span class="va">patient_data</span>(<span class="va">patient_id</span><span class="op">,:</span>)<span class="op">,</span> <span class="va">patient_reference</span>)</span>
<span id="cb43-17"><a href="#cb43-17" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb43-18"><a href="#cb43-18" tabindex="-1"></a></span>
<span id="cb43-19"><a href="#cb43-19" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>for</code> to create a loop that repeats one or more
operations.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/swcarpentry/matlab-novice-inflammation/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/matlab-novice-inflammation/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/matlab-novice-inflammation/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://uomresearchit.github.io/matlab-novice/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://uomresearchit.github.io/matlab-novice/instructor/aio.html",
  "identifier": "https://uomresearchit.github.io/matlab-novice/instructor/aio.html",
  "dateCreated": "2014-12-12",
  "dateModified": "2024-10-08",
  "datePublished": "2024-10-08"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

